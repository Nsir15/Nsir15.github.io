<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[CALayer position å’Œ anchorPoint çš„é—®é¢˜]]></title>
    <url>%2F2017%2F08%2F30%2FCALayer%20position%20%E5%92%8C%20anchorPoint%20%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[æ¦‚è¦ï¼š CALayer çš„positionç™½è¯æ¥è®²ï¼špositionå°±æ˜¯layer è‡ªèº«çš„anchorPointç›¸å¯¹äºŽçˆ¶superLayerçš„åæ ‡ä½ç½®ã€‚å¸¸è§„è¯´æ¥ï¼Œåœ¨iOSä¸Šï¼Œä¸€ä¸ªå›¾å±‚çš„positionä½äºŽçˆ¶å›¾å±‚çš„å·¦ä¸Šè§’å…·ä½“æ¦‚å¿µå‚è€ƒï¼šè¿™å°†æ˜¯ä½ æœ€åŽä¸€æ¬¡çº ç»“positionä¸ŽanchorPoint å…³äºŽç”»æ›²çº¿çš„è§’åº¦å‚è€ƒå›¾ï¼š æ­£æ–‡ï¼šéœ€æ±‚æ˜¯ä¸€ä¸ªæ‰«æåŒ¹é…çš„åŠ¨ç”»ï¼š å¦‚ä¸Šå±•ç¤ºçš„æ˜¯æœ€ç»ˆçš„æ•ˆæžœã€‚è¿™é‡Œä¸»è¦ç”¨çš„æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰view PulsingViewï¼Œé‡å†™ (void)drawRect:(CGRect)rectæ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•å†…éƒ¨åŽ»ç”»ç›¸åº”çš„å…ƒç´ ï¼Œä¸»è¦åŒ…å«ï¼š 1.å¤–éƒ¨æ‰©æ•£çš„è„‰å†²layerã€‚ 2.é›·è¾¾æ‰«é¢çš„å†…åœˆlayerã€‚ 3.é›·è¾¾æ‰«æçš„æ‰‡å½¢layerã€‚é¦–å…ˆæ˜¯å¤–éƒ¨çš„è„‰å†²æ‰©æ•£åŠ¨ç”»å®žçŽ°ï¼šè¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œå‚è€ƒç½‘ä¸Šçš„å¥½å¤šé›·è¾¾æ‰«æå®žçŽ°ï¼ŒPulsingView.mæ–‡ä»¶ä¸­ ä»£ç å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142 [super drawRect:rect]; [[UIColor whiteColor] setFill]; UIRectFill(rect); UIImage * image = [UIImage imageNamed:@&quot;radar_background&quot;]; [image drawInRect:rect]; CGFloat pulsingWidth = rect.size.width / 2.5; CGFloat pulsingX = self.center.x - pulsingWidth * 0.5; CGFloat pulsingY = self.center.y - pulsingWidth * 0.5;// è„‰å†²layer CALayer * pulsingLayer = [CALayer layer]; pulsingLayer.frame = CGRectMake(pulsingX, pulsingY, pulsingWidth, pulsingWidth); pulsingLayer.borderColor = [UIColor colorWithRed:201/255.0 green:201/255.0 blue:201/255.0 alpha:1].CGColor; pulsingLayer.cornerRadius = pulsingWidth * 0.5; pulsingLayer.backgroundColor = [UIColor whiteColor].CGColor;//è¿™é‡Œå¿…é¡»è®¾ç½®layerå±‚çš„èƒŒæ™¯é¢œè‰²ï¼Œé»˜è®¤åº”è¯¥æ˜¯é€æ˜Žçš„ï¼Œå¯¼è‡´è®¾ç½®çš„é˜´å½±é¢œè‰²æ— æ³•æ˜¾ç¤ºå‡ºæ¥ pulsingLayer.shadowColor = [UIColor blackColor].CGColor; pulsingLayer.shadowOffset = CGSizeMake(0, 0); pulsingLayer.shadowOpacity = 1; pulsingLayer.shadowRadius = 5; [self.layer addSublayer:pulsingLayer]; // ç¼©æ”¾åŠ¨ç”» CABasicAnimation * scaleAnimation = [CABasicAnimation animationWithKeyPath:@&quot;transform.scale&quot;]; scaleAnimation.autoreverses = false; scaleAnimation.fromValue = @1.0f; scaleAnimation.toValue = @2.0f; // é€æ˜ŽåŠ¨ç”» CAKeyframeAnimation * opacityAnimation = [CAKeyframeAnimation animationWithKeyPath:@&quot;opacity&quot;]; opacityAnimation.keyTimes = @[@0,@0.1,@0.2,@0.3,@0.4,@0.5,@0.6,@0.7,@0.8,@0.9,@1]; opacityAnimation.values = @[@1,@0.9,@0.8,@0.7,@0.6,@0.5,@0.4,@0.3,@0.2,@0.1,@0]; CAAnimationGroup * animationGroup = [CAAnimationGroup animation]; animationGroup.beginTime = CACurrentMediaTime() + 1; animationGroup.fillMode = kCAFillModeBackwards; animationGroup.repeatCount = HUGE_VAL; animationGroup.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear]; animationGroup.duration = 2; animationGroup.animations = @[scaleAnimation,opacityAnimation]; [pulsingLayer addAnimation:animationGroup forKey:@&quot;pulse&quot;]; è¿™ä¸€æ­¥åšå®Œä¼šå‡ºæ¥å¦‚ä¸‹æ•ˆæžœï¼š æŽ¥ä¸‹æ¥å°±æ˜¯æ·»åŠ é›·è¾¾çš„å†…åœˆlayer,ç»§ç»­åœ¨ä¸Šé¢çš„ä»£ç ä¸‹é¢æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š123456789101112// ä¸­é—´åœ†çŽ¯CALayer * middleCycle = [CALayer layer];middleCycle.frame = CGRectMake(pulsingX, pulsingY, pulsingWidth, pulsingWidth);middleCycle.cornerRadius = pulsingWidth * 0.5;middleCycle.borderColor = [UIColor colorWithRed:41/255.0 green:152/255.0 blue:241/255.0 alpha:1].CGColor;middleCycle.backgroundColor = [UIColor whiteColor].CGColor;middleCycle.shadowOffset = CGSizeMake(0, 0);middleCycle.borderWidth = 1;middleCycle.shadowRadius = 3;middleCycle.shadowOpacity = 1;middleCycle.shadowColor = [UIColor lightGrayColor].CGColor;[self.layer addSublayer:middleCycle]; ã€‚è¿™é‡Œçš„å‘ä¹Ÿæ˜¯å‡ºçŽ°åœ¨è¿™å—åœ°æ–¹ã€‚å› ä¸ºåœ¨å¤–éƒ¨å¼•ç”¨PulsingViewçš„æ—¶å€™ï¼Œè®¾ç½®çš„frameæ˜¯æŽ§åˆ¶å™¨viewçš„bounds,æ­¤æ—¶è¿è¡Œå‡ºæ¥çš„ç»“æžœå¦‚ä¸‹ï¼š æŽ¥ä¸‹æ¥å°±æ˜¯æœ€åŽä¸€æ­¥ï¼Œæ·»åŠ æ‰‡å½¢çš„layer å¹¶æ·»åŠ æ‰«æåŠ¨ç”»(ä¸€å¼€å§‹æ‰‡å½¢æ˜¯æ‰“ç®—åšæˆæ¸å˜çš„æ•ˆæžœçš„ï¼Œä¸è¿‡è¿™é‡Œæ²¡æœ‰å®Œç¾Žå®žçŽ°å‡ºæ¥ï¼Œä¸€å¼€å§‹ä½¿ç”¨äº†ä¸€ä¸ªä¸‰æ–¹XHRadarView,å•çº¯çš„å¼•ç”¨é‡Œé¢çš„æ‰‡å½¢viewçš„ç±»ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æŽ¥ä½¿ç”¨ä»–å†…éƒ¨çš„æ¸å˜colorï¼Œä¸è¿‡å‡ºæ¥å¹¶ä¸æ˜¯å¾ˆå®Œç¾Žï¼Œæ‰€ä»¥è¿˜æ˜¯è‡ªå·±ç”»æ‰‡å½¢ï¼Œå…ˆä¸åšæ¸å˜æ•ˆæžœäº†ã€‚ï¼‰æ­¤æ—¶å°±å‡ºçŽ°äº†å…³äºŽpositioné—®é¢˜å¯¼è‡´çš„å‘. è¿™é‡Œä¸€å¼€çš„æ€è·¯è¿˜æ˜¯å’Œä¹‹å‰ä¸€æ ·ï¼Œç»§ç»­åœ¨self.layerä¸Šæ·»åŠ æ‰‡å½¢çš„layerï¼Œä»¥self.centerä¸ºåœ†å¿ƒï¼Œç”»ä¸€ä¸ª90åº¦çš„æ›²çº¿ï¼š12345678910CGPoint fanshapedCenter = self.center; UIBezierPath * fanshapedPath = [UIBezierPath bezierPath]; [fanshapedPath addArcWithCenter:fanshapedCenter radius:(pulsingWidth + 20) * 0.5 startAngle:3 * M_PI / 2 endAngle:0 clockwise:YES]; [fanshapedPath addLineToPoint:fanshapedCenter]; [fanshapedPath closePath]; CAShapeLayer * fanshapedLayer = [CAShapeLayer layer]; fanshapedLayer.path = fanshapedPath.CGPath; fanshapedLayer.opacity = 0.7; fanshapedLayer.fillColor = [UIColor colorWithRed:41/255.0 green:152/255.0 blue:241/255.0 alpha:1].CGColor; [self.layer addSublayer:fanshapedLayer]; æ­¤æ—¶è¿è¡Œå‡ºæ¥é™æ€æƒ…å†µä¸‹çš„éƒ½æ²¡é—®é¢˜ï¼š ç„¶åŽæ·»åŠ æ—‹è½¬åŠ¨ç”»ï¼Œè®©æ‰‡å½¢ç»•ç€åœ†å¿ƒè¿›è¡Œè‡ªè½¬ï¼š12345678CABasicAnimation *rotationAnimation = [CABasicAnimation animationWithKeyPath:@&quot;transform.rotation.z&quot;]; rotationAnimation.toValue = [NSNumber numberWithFloat: 3 * M_PI ]; rotationAnimation.duration = 8; rotationAnimation.cumulative = YES; rotationAnimation.removedOnCompletion = NO; rotationAnimation.repeatCount = MAXFLOAT; rotationAnimation.fillMode = kCAFillModeForwards; [fanshapedLayer addAnimation:rotationAnimation forKey:@&quot;rotation&quot;]; ç„¶è€Œè¿è¡Œå‡ºæ¥çš„ç»“æžœå¹¶æ²¡æœ‰å’Œæˆ‘ä»¬é¢„æœŸçš„ä¸€æ ·ï¼š ä»”ç»†è§‚å¯Ÿå¯ä»¥å‘çŽ°ï¼Œæ‰‡å½¢æ˜¯åœ¨å›´ç»•ç€selfçš„åŽŸç‚¹(0,0)ç‚¹è¿›è¡Œå…¬è½¬ï¼Œä¸€å¼€å§‹ä¸€ç›´ä»¥ä¸ºæ˜¯ç”»æ‰‡å½¢çš„æ—¶å€™å‡ºçš„é—®é¢˜ï¼Œæ˜¯ä¸æ˜¯ç”»æ³•ä¸å¯¹ä¹‹ç±»çš„ï¼Œè¿˜è¯•è¿‡ç›´æŽ¥ç”¨Quaritz2D åŽ»ç”»æ‰‡å½¢ï¼Œç„¶è€Œæ•ˆæžœä¾ç„¶å¦‚æ­¤ï¼Œç»è¿‡å„ç§æŸ¥æ‰¾ï¼Œæ‰å‘çŽ°æ˜¯position å¯¼è‡´çš„é—®é¢˜ï¼Œé€šè¿‡æ–­ç‚¹ï¼Œæ‰“å°ä¸€ä¸‹hanshapedLayerå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š12Printing description of fanshapedLayer:&lt;CAShapeLayer:0x608000233640; position = CGPoint (0 0); bounds = CGRect (0 0; 0 0); allowsGroupOpacity = YES; fillColor = &lt;CGColor 0x6080000bef00&gt; [&lt;CGColorSpace 0x600000228940&gt; (kCGColorSpaceICCBased; kCGColorSpaceModelRGB; sRGB IEC61966-2.1; extended range)] ( 0.160784 0.596078 0.945098 1 ); opacity = 0.7; path = &lt;CGPath 0x60800003bf20&gt;&gt; å¯ä»¥çœ‹åˆ°hanshapedLayerçš„position æ˜¯ (0,0),ä¹Ÿå°±æ˜¯çˆ¶æŽ§ä»¶çš„å·¦ä¸Šè§’åŽŸç‚¹ï¼Œæ–‡ç« å¼€å¤´æˆ‘ä»¬æåˆ°è¿‡ï¼Œlayerçš„position å°±æ˜¯è‡ªå·±anchorPoint ç›¸å¯¹äºŽçˆ¶layer çš„åæ ‡ï¼Œè€Œlayerè‡ªèº«æ—‹è½¬ä¹Ÿæ˜¯ç›¸å¯¹äºŽanchorPoint æ—‹è½¬ï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸Šé¢ä¼šå‡ºçŽ°æ‰‡å½¢ç»•ç€å±å¹•çš„æœ€ä¸Šè§’åšå…¬è½¬ã€‚æ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦å°†hanshapedLayer çš„ position ç§»åˆ°ä¸­å¿ƒç‚¹çš„ä½ç½®ï¼š1fanshapedLayer.position = fanshapedCenter; æ­¤æ—¶æˆ‘ä»¬å†æ¥çœ‹è¿è¡Œç»“æžœï¼š æ­¤æ—¶æ‰‡å½¢ç¡®å®žæ˜¯ç»•ç€ä¸­å¿ƒç‚¹å¼€å§‹è½¬äº†ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æžœã€‚ã€‚ã€‚æ­¤æ—¶å†…å¿ƒæ˜¯å´©æºƒçš„ã€‚æ‰€ä»¥æ”¾å¼ƒäº†è¿™ç§åŠ¨ç”»çš„æ–¹å¼ï¼Œç›´æŽ¥å°†æ‰‡å½¢fanshapedLayeræ·»åŠ åˆ°ä¸­é—´çš„å†…åœˆlayerä¸Šï¼Œç„¶åŽè®©å†…åœˆlayerè‡ªè½¬ï¼Œæœ€åŽå¯ä»¥å®žçŽ°æœ€ç»ˆçš„æ•ˆæžœã€‚12345678910111213// æ‰«æçš„æ‰‡å½¢ UIBezierPath * fanshapedPath = [UIBezierPath bezierPath]; [fanshapedPath addArcWithCenter:CGPointMake(middleCycle.frame.size.width * 0.5, middleCycle.frame.size.height * 0.5) radius:(pulsingWidth + 30) * 0.5 startAngle:3 * M_PI / 2 endAngle:0 clockwise:YES]; [fanshapedPath addLineToPoint:CGPointMake(middleCycle.frame.size.width * 0.5, middleCycle.frame.size.height * 0.5)]; CAShapeLayer * fanshaped = [CAShapeLayer layer]; fanshaped.fillColor = [UIColor colorWithRed:41/255.0 green:152/255.0 blue:241/255.0 alpha:1].CGColor; fanshaped.opacity = 0.7; [fanshapedPath closePath]; fanshaped.path = fanshapedPath.CGPath; [middleCycle addSublayer:fanshaped];ç„¶åŽå°†åŠ¨ç”»æ·»åŠ åˆ°middleCycleä¸Šï¼š [middleCycle addAnimation:rotationAnimation forKey:@&quot;rotation&quot;]; åŽæ¥åœ¨ç®€ä¹¦ä¸Šåˆçœ‹åˆ°ä»¥ç¯‡åšå®¢ä¹Ÿé‡åˆ°äº†å…¬è½¬çš„é—®é¢˜ CALayeræ—‹è½¬åŠ¨ç”»å‚è€ƒè¿™ä½ æ¸£å­©å­åšä¸»çš„ä½œæ³•ï¼Œå°†ç”»æ‰‡å½¢çš„ä»£ç ä½œå¦‚ä¸‹ä¿®æ”¹ï¼š12[fanshapedPath addArcWithCenter:CGPointZero radius:(pulsingWidth + 20) * 0.5 startAngle:3 * M_PI / 2 endAngle:0 clockwise:YES]; [fanshapedPath addLineToPoint:CGPointZero]; çŽ°åœ¨åŽŸç‚¹ä½ç½®ç”»å‡ºæ‰‡å½¢ï¼Œç„¶åŽå†è®¾ç½®potisionfanshapedLayer.position = fanshapedCenter;æœ€åŽç»ˆäºŽè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ æœ€åŽï¼Œè´´ä¸Šdraw æ–¹æ³•é‡Œçš„å…¨éƒ¨ä»£ç ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798// An empty implementation adversely affects performance during animation.- (void)drawRect:(CGRect)rect &#123; // Drawing code [super drawRect:rect]; [[UIColor whiteColor] setFill]; UIRectFill(rect); UIImage * image = [UIImage imageNamed:@&quot;radar_background&quot;]; [image drawInRect:rect]; CGFloat pulsingWidth = rect.size.width / 2.5; CGFloat pulsingX = self.center.x - pulsingWidth * 0.5; CGFloat pulsingY = self.center.y - pulsingWidth * 0.5; // è„‰å†²layer CALayer * pulsingLayer = [CALayer layer]; pulsingLayer.frame = CGRectMake(pulsingX, pulsingY, pulsingWidth, pulsingWidth); pulsingLayer.borderColor = [UIColor colorWithRed:201/255.0 green:201/255.0 blue:201/255.0 alpha:1].CGColor; pulsingLayer.cornerRadius = pulsingWidth * 0.5; pulsingLayer.backgroundColor = [UIColor whiteColor].CGColor;//è¿™é‡Œå¿…é¡»è®¾ç½®layerå±‚çš„èƒŒæ™¯é¢œè‰²ï¼Œé»˜è®¤åº”è¯¥æ˜¯é€æ˜Žçš„ï¼Œå¯¼è‡´è®¾ç½®çš„é˜´å½±é¢œè‰²æ— æ³•æ˜¾ç¤ºå‡ºæ¥ pulsingLayer.shadowColor = [UIColor blackColor].CGColor; pulsingLayer.shadowOffset = CGSizeMake(0, 0); pulsingLayer.shadowOpacity = 1; pulsingLayer.shadowRadius = 5; [self.layer addSublayer:pulsingLayer]; // ç¼©æ”¾åŠ¨ç”» CABasicAnimation * scaleAnimation = [CABasicAnimation animationWithKeyPath:@&quot;transform.scale&quot;]; scaleAnimation.autoreverses = false; scaleAnimation.fromValue = @1.0f; scaleAnimation.toValue = @2.0f; // é€æ˜ŽåŠ¨ç”» CAKeyframeAnimation * opacityAnimation = [CAKeyframeAnimation animationWithKeyPath:@&quot;opacity&quot;]; opacityAnimation.keyTimes = @[@0,@0.1,@0.2,@0.3,@0.4,@0.5,@0.6,@0.7,@0.8,@0.9,@1]; opacityAnimation.values = @[@1,@0.9,@0.8,@0.7,@0.6,@0.5,@0.4,@0.3,@0.2,@0.1,@0]; CAAnimationGroup * animationGroup = [CAAnimationGroup animation]; animationGroup.beginTime = CACurrentMediaTime() + 1; animationGroup.fillMode = kCAFillModeBackwards; animationGroup.repeatCount = HUGE_VAL; animationGroup.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear]; animationGroup.duration = 2; animationGroup.animations = @[scaleAnimation,opacityAnimation]; [pulsingLayer addAnimation:animationGroup forKey:@&quot;pulse&quot;]; // ä¸­é—´åœ†çŽ¯ CALayer * middleCycle = [CALayer layer]; middleCycle.frame = CGRectMake(pulsingX, pulsingY, pulsingWidth, pulsingWidth); middleCycle.cornerRadius = pulsingWidth * 0.5; middleCycle.borderColor = [UIColor colorWithRed:41/255.0 green:152/255.0 blue:241/255.0 alpha:1].CGColor; middleCycle.backgroundColor = [UIColor whiteColor].CGColor; middleCycle.shadowOffset = CGSizeMake(0, 0); middleCycle.borderWidth = 1; middleCycle.shadowRadius = 3; middleCycle.shadowOpacity = 1; middleCycle.shadowColor = [UIColor lightGrayColor].CGColor; [self.layer addSublayer:middleCycle]; // æ·»åŠ åˆ°self.layerä¸Š CGPoint fanshapedCenter = self.center; UIBezierPath * fanshapedPath = [UIBezierPath bezierPath]; [fanshapedPath addArcWithCenter:CGPointZero radius:(pulsingWidth + 20) * 0.5 startAngle:3 * M_PI / 2 endAngle:0 clockwise:YES]; [fanshapedPath addLineToPoint:CGPointZero]; [fanshapedPath closePath]; CAShapeLayer * fanshapedLayer = [CAShapeLayer layer]; fanshapedLayer.path = fanshapedPath.CGPath; fanshapedLayer.opacity = 0.7; fanshapedLayer.position = fanshapedCenter; fanshapedLayer.fillColor = [UIColor colorWithRed:41/255.0 green:152/255.0 blue:241/255.0 alpha:1].CGColor; [self.layer addSublayer:fanshapedLayer]; // æ·»åŠ åˆ°middleCycleä¸Š// [fanshapedPath addArcWithCenter:CGPointMake(0,0) radius:(pulsingWidth + 20) * 0.5 startAngle:3 * M_PI / 2 endAngle:0 clockwise:YES];// [fanshapedPath addLineToPoint:CGPointZero];// CAShapeLayer * fanshaped = [CAShapeLayer layer];// fanshaped.fillColor = [UIColor colorWithRed:41/255.0 green:152/255.0 blue:241/255.0 alpha:1].CGColor;// fanshaped.opacity = 0.7;// fanshaped.position = CGPointMake(middleCycle.frame.size.width * 0.5, middleCycle.frame.size.height * 0.5);// [fanshapedPath closePath];// fanshaped.path = fanshapedPath.CGPath;// [middleCycle addSublayer:fanshaped];// NSLog(@&quot;fanshaped==== frame:%@,anchorPoint:%@,bounds:%@,position:%@&quot;,NSStringFromCGRect(fanshaped.frame),NSStringFromCGPoint(fanshaped.anchorPoint),NSStringFromCGRect(fanshaped.bounds),NSStringFromCGPoint(fanshaped.position)); CABasicAnimation *rotationAnimation = [CABasicAnimation animationWithKeyPath:@&quot;transform.rotation.z&quot;]; rotationAnimation.toValue = [NSNumber numberWithFloat: 3 * M_PI ]; rotationAnimation.duration = 8; rotationAnimation.cumulative = YES; rotationAnimation.removedOnCompletion = NO; rotationAnimation.repeatCount = MAXFLOAT; rotationAnimation.fillMode = kCAFillModeForwards; // [middleCycle addAnimation:rotationAnimation forKey:@&quot;rotation&quot;]; [fanshapedLayer addAnimation:rotationAnimation forKey:@&quot;rotation&quot;];&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS é¡¹ç›®å°çŸ¥è¯†ç‚¹]]></title>
    <url>%2F2017%2F08%2F26%2FiOS%20%E9%A1%B9%E7%9B%AE%E5%B0%8F%E7%9F%A5%E8%AF%86%E7%82%B9%2F</url>
    <content type="text"><![CDATA[#è‡ªå®šä¹‰æŽ§ä»¶ åœ¨- (instancetype)initWithFrame:(CGRect)frameé‡Œè‡ªå®šä¹‰æŽ§ä»¶åœ¨- (void)layoutSubviews é‡Œå¸ƒå±€æŽ§ä»¶ 1234567åå­—å«attributeså¹¶ä¸”æ˜¯NSDictionary *ç±»åž‹çš„å‚æ•°ï¼Œå®ƒçš„keyä¸€èˆ¬éƒ½æœ‰ä»¥ä¸‹è§„å¾‹ 1.iOS7å¼€å§‹ 1&gt; æ‰€æœ‰çš„keyéƒ½æ¥æºäºŽï¼š NSAttributedString.h 2&gt; æ ¼å¼åŸºæœ¬éƒ½æ˜¯ï¼šNS***AttributeName 2.iOS7ä¹‹å‰ 1&gt; æ‰€æœ‰çš„keyéƒ½æ¥æºäºŽï¼š UIStringDrawing.h 2&gt; æ ¼å¼åŸºæœ¬éƒ½æ˜¯ï¼šUITextAttribute*** 123 NSString * title = [button currentTitle]; // èŽ·å–æŒ‰é’®å½“å‰titleæ–‡å­— CGSize size = [title sizeWithAttributes:@&#123;NSFontAttributeName:button.titleLabel.font&#125;];//æ ¹æ®å­—ä½“è®¡ç®—å¤§å°_titleUnderLine.backgroundColor = [titleButton titleColorForState:UIControlStateSelected]; //æ ¹æ®æŒ‰é’®title é¢œè‰²è®¾ç½®ä¸‹åˆ’çº¿é¢œè‰² #cellåˆ†å‰²çº¿é¡¶å¤´æ“ä½œ ##1.ç¬¬ä¸€ç§æ–¹æ³•ï¼Œåˆ©ç”¨ç³»ç»Ÿçš„å±žæ€§åŽ»è®¾ç½® é¡¹ç›®ä¸­ç»å¸¸ä¼šæœ‰äº›éœ€æ±‚æ˜¯cell çš„åˆ†å‰²çº¿é¡¶å¤´ï¼Œè€Œç³»ç»Ÿé»˜è®¤çš„æ˜¯å‰é¢æœ‰ä¸€å®šçš„é—´è·ï¼Œå…¶å®žè¿™æ˜¯ç”±ä¸€ä¸ªseparatorInset å±žæ€§é€ æˆçš„(iOS7ä»¥åŽå‡ºçš„)ï¼Œé€šè¿‡æ‰“å°ï¼š 1234567- (void)viewDidAppear:(BOOL)animated&#123; NXLog(@&quot;margin:%@&quot;,NSStringFromUIEdgeInsets(self.tableView.separatorInset));&#125;æ‰“å°ç»“æžœï¼šmargin:&#123;0, 15, 0, 0&#125; //å¯ä»¥çœ‹å‡ºæ¥ç³»ç»Ÿé»˜è®¤æœ‰ä¸€ä¸ª15çš„åç§»é‡ å°†è¯¥å±žæ€§è®¾ç½®ä¸ºç©ºï¼ŒçŽ°åœ¨tableViewé‡Œé¢è®¾ç½®ï¼š 12 self.tableView.separatorInset = UIEdgeInsetsZero; //åˆ†éš”çº¿é¡¶å¤´ï¼Œè¿™ä¸ªåªæ˜¯è®¾ç½®tableView é¡¶å¤´ï¼Œè¿˜éœ€è¦åœ¨cellé‡Œè®¾ç½®cellçš„é¡¶å¤´é€šè¿‡è¿™ä¸€æ­¥è®¾ç½®å‘çŽ°åˆ†å‰²çº¿æ¯”ä¹‹å‰å·¦ç§»äº†ä¸å°‘ï¼Œä½†æ˜¯è¿˜æ²¡é¡¶åˆ°å¤´ï¼Œè¿™é‡Œå°±åˆ¤æ–­æ˜¯cellè‡ªèº«çš„åŽŸå›  åŒæ—¶åœ¨cell é‡Œé¢è¿›è¡Œè®¾ç½®ï¼š1self.separatorInset = UIEdgeInsetsZero;//cellåˆ†å‰²çº¿é¡¶å¤´ è¿™æ—¶å€™è¿è¡Œå†çœ‹ç»“æžœï¼Œå·²ç»OKé¡¶åˆ°å¤´ã€‚ ##tableViewåº•å±‚å®žçŽ° 1.tableView å…ˆæŠŠæ‰€æœ‰cell çš„å°ºå¯¸è®¡ç®—å¥½ï¼Œä¿å­˜åˆ°ä¸€ä¸ªæ•°ç»„é‡Œã€‚2.å½“cell è¦æ˜¾ç¤ºçš„æ—¶å€™å°±æ‹¿åˆ°è¿™ä¸ªcell åŽ»è®¾ç½®frame : cell.frame = frames[row]ã€‚ ##2.ç¬¬äºŒç§æ–¹æ³•ï¼Œé‡å†™cell çš„setFrame,å¯ä»¥éšæ„è®¾ç½®cell çš„é—´è·ï¼Œæ¯”è¾ƒä¸‡èƒ½ã€‚ ä¸»è¦æ€è·¯ï¼šä¸»è¦å°±æ˜¯åˆ©ç”¨äº†ä¸Šé¢çš„tableView çš„å®žçŽ°åŽŸç†ã€‚1.é¦–å…ˆè®¾ç½®tableViewçš„èƒŒæ™¯è‰²ä¸ºåˆ†å‰²çº¿çš„é¢œè‰²ã€‚2.ç¦æŽ‰ç³»ç»Ÿçš„åˆ†å‰²çº¿3.åœ¨cellç±»ä¸­é‡å†™setFrame æ–¹æ³•ã€‚ 123456789101112 self.tableView.backgroundColor = NXColor(220, 220, 221); self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;//åœ¨è‡ªå®šä¹‰çš„cellç±»ä¸­ï¼š- (void)setFrame:(CGRect)frame&#123; NXLog(@&quot;cellFrame:%@&quot;,NSStringFromCGRect(frame)); //å› ä¸ºä¹‹å‰çš„frame éƒ½æ˜¯è®¡ç®—å¥½çš„ï¼Œè¿™æ˜¯åœ¨è¦æ˜¾ç¤ºçš„æ—¶å€™åŽ»è®¾ç½®ä¸€ä¸‹ï¼Œæ‰€ä»¥è¿™é‡ŒåªåŽ»å°†é«˜åº¦å‡1ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–å°ºå¯¸ frame.size.height -=1; // å¦‚æžœæƒ³è¦é—´è·æ›´å¤§çš„è¯å¯ä»¥ -=10 ç­‰ï¼Œéšæ„è¿™ç§æ–¹æ³•æ¯”è¾ƒä¸‡èƒ½ //è¿™ä¸ªæ‰æ˜¯ç³»ç»ŸçœŸæ­£çš„è®¾ç½®frameã€‚é‡å†™äº†è¿™ä¸ªæ–¹æ³•ä¼šå°†ç³»ç»Ÿçš„frameæ¸…ç©ºï¼Œæ‰€ä»¥éœ€è¦è°ƒç”¨è¿™ä¸ª [super setFrame:frame];&#125; #å±å¹•é€‚é… 1.ä¸€ä¸ªviewä»ŽXib åŠ è½½ï¼Œéœ€ä¸éœ€è¦é‡æ–°å›ºå®šä¸€ä¸‹å°ºå¯¸ï¼Ÿ è¿™ä¸ªæ˜¯ä¸€å®šå¾—éœ€è¦çš„ï¼Œæ¯”è¾ƒä¿é™©ã€‚2.ä¸€èˆ¬æ·»åŠ xib viewçš„æ—¶å€™æ˜¯åœ¨viewDidLoad é‡Œé¢åŠ è½½ï¼Œä½†æ˜¯è®¾ç½®å°ºå¯¸frame æœ€å¥½åœ¨viewDidLayoutSubViews é‡Œé¢åŽ»è®¾ç½®ã€‚å› ä¸ºviewDidLoad å¹¶ä¸ä¼šåŽ»å¸ƒå±€frame ï¼Œåªæ˜¯æ‹¿åˆ°xib è®¾ç½®çš„å¤§å°å±žæ€§ï¼Œåªæœ‰åœ¨ viewDidLayoutSubViews é‡Œæ‰ä¼šåŽ»æ ¹æ®å¸ƒå±€åŽ»ç¡®å®šæŽ§ä»¶çš„æœ€ç»ˆå°ºå¯¸(ä¸è¿‡æ·»åŠ view çš„æ“ä½œä¸èƒ½æ”¾åœ¨è¿™é‡Œï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•ä¼šè°ƒç”¨å¤šæ¬¡) 12345678910111213141516171819202122ðŸŒ°ï¼š- (void)viewDidLoad &#123; [super viewDidLoad]; UIView * loginView = [NXLoginRegistView loginView]; [self.middleView addSubview:loginView]; UIView * registView = [NXLoginRegistView registView]; [self.middleView addSubview:registView]; UIView * fastLogin = [NXFastLoginView fastLoginView]; [self.bottomView addSubview:fastLogin];&#125;- (void)viewDidLayoutSubviews&#123; [super viewDidLayoutSubviews]; //åœ¨è¿™é‡Œé¢è®¾ç½®å°ºå¯¸ UIView * loginView = [self.middleView subviews][0]; loginView.frame = CGRectMake(0, 0, self.middleView.frame.size.width * 0.5, self.middleView.frame.size.height); UIView * registView = [self.middleView subviews][1]; registView.frame = CGRectMake(self.middleView.frame.size.width * 0.5, 0, self.middleView.frame.size.width * 0.5, self.middleView.frame.size.height); UIView * fastLogin = [self.bottomView subviews][0]; fastLogin.frame = CGRectMake(0, 0, self.bottomView.frame.size.width, self.bottomView.frame.size.height);&#125; #ä»ŽXibåŠ è½½çš„view è®¾ç½®åŠ¨ç”» æ˜¯é€šè¿‡æ“ä½œçº¦æŸåŽ»è®¾ç½®ï¼Œæ¯”å¦‚è¦ä¿®æ”¹xå€¼äº§ç”ŸåŠ¨ç”»å°±æ‰¾åˆ°xçš„çº¦æŸæ‹–çº¿æ·»åˆ°ç±»æ–‡ä»¶ä¸­æˆä¸ºå±žæ€§ï¼Œç„¶åŽå¯¹è¯¥å±žæ€§è¿›è¡Œæ“ä½œï¼Œåœ¨è®¾ç½®åŠ¨ç”»æ—¶ï¼Œå¿…é¡»åŠ ä¸Šè¿™å¥ ï¼š 1[self.view layoutIfNeeded]; //è¿™å¥è¯å¾ˆé‡è¦ï¼Œåªæœ‰é‡æ–°å¸ƒå±€æ‰ä¼šäº§ç”ŸåŠ¨ç”»æ•ˆæžœï¼Œå¦åˆ™æ²¡æœ‰åŠ¨ç”»æ•ˆæžœ ä¾‹å¦‚ 1234[UIView animateWithDuration:1 animations:^&#123; self.testViewWidthConstraint.constant = 200; [self.view layoutIfNeeded]; //è¿™å¥è¯å¾ˆé‡è¦ï¼Œåªæœ‰é‡æ–°å¸ƒå±€æ‰ä¼šäº§ç”ŸåŠ¨ç”»æ•ˆæžœï¼Œå¦åˆ™æ²¡æœ‰åŠ¨ç”»æ•ˆæžœ&#125;]; #ä¸€ä¸ªxibæ–‡ä»¶å¯ä»¥ç®¡ç†å¤šä¸ªview #é‡å†™button çš„å¸ƒå±€ è¿™ä¸ªåœ¨é¡¹ç›®ä¸­ä¹Ÿå¾ˆå¸¸è§ï¼Œé»˜è®¤çš„æŒ‰é’®å¸ƒå±€æ˜¯å·¦å³å¸ƒå±€ï¼Œå³å·¦è¾¹imageView + å³è¾¹label ã€‚è€Œå¥½å¤šé¡¹ç›®ä¸­éœ€è¦çš„æ˜¯ä¸Šä¸‹å¸ƒå±€ï¼Œæ‰€ä»¥éœ€è¦è‡ªå®šä¹‰buttonï¼Œé‡æ–°å¸ƒå±€ã€‚è¿™é‡Œåœ¨layoutSubViews æ–¹æ³•é‡Œé¢è¿›è¡Œï¼Œå› ä¸ºåœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢æ‰€æœ‰çš„æŽ§ä»¶å°ºå¯¸éƒ½å·²ç»æ˜¯è®¡ç®—å¥½çš„ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦é‡æ–°åŽ»è®¡ç®—ï¼Œåªè¦æ”¹ä¸€ä¸‹å¸ƒå±€å°±å¯ä»¥ã€‚ 123456789ðŸŒ°ï¼š- (void)layoutSubviews&#123; [super layoutSubviews]; self.imageView.nx_y = 0; self.imageView.nx_centerX = self.nx_centerX; self.titleLabel.nx_y = self.nx_height - self.titleLabel.nx_height; self.titleLabel.nx_centerX = self.nx_centerX;&#125; #è‡ªå®šä¹‰tabBarçš„é—®é¢˜ é¡¹ç›®ä¸­éœ€è¦å®šåˆ¶tabBar çš„æ—¶å€™éœ€è¦ç”¨åˆ°è‡ªå®šä¹‰tabBar,è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ä¸èƒ½ç›´æŽ¥é€šè¿‡å¦‚ä¸‹çš„èµ‹å€¼è¯­æ³•è¿›è¡Œæ›¿æ¢ï¼š 123456ðŸŒ°ï¼š NXTabBar * nTabBar = [[NXTabBar alloc]init]; self.tabBar = nTabBar;è¿™æ ·æ›¿æ¢çš„è¯æ˜¯æ²¡æœ‰æ•ˆæžœçš„ï¼Œéœ€è¦ç”¨KVC çš„å½¢å¼è¿›è¡Œæ›¿æ¢ï¼š [self setValue:nTabBar forKey:@&quot;tabBar&quot;]; #iOSç±»ç§æœ‰å±žæ€§çš„è®¿é—®å’Œä¿®æ”¹http://www.jianshu.com/p/a667f0ce9573 #iOS ç±»åˆ«ä¸­æ·»åŠ å±žæ€§ï¼ˆå±žæ€§å’Œå®žä¾‹å˜é‡çš„åŒºåˆ«ï¼‰ã€è½¬ã€‘iOSä¸­å±žæ€§ä¸Žæˆå‘˜å˜é‡çš„åŒºåˆ«iOS Categoryä¸­æ·»åŠ å±žæ€§å’Œæˆå‘˜å˜é‡çš„åŒºåˆ« #é€šè¿‡category å’Œ runtime è®¾ç½®textField çš„ placehold çš„é¢œè‰² é¡¹ç›®ä¸­ç»å¸¸ä¼šç”¨åˆ°textField ï¼Œæ¯”å¦‚ç™»å½•æ³¨å†Œç­‰ã€‚é»˜è®¤çš„å…‰æ ‡æ˜¯è“è‰²ï¼Œè€Œä¸”placeholderçš„æ–‡å­—é¢œè‰²ä¹Ÿæ˜¯ç°çš„ï¼Œä¸ä¼šå˜åŒ–ã€‚æœ‰æ—¶å€™é¡¹ç›®ä¼šéœ€æ±‚ç‚¹å‡»åŽå…‰æ ‡ä¸ºç™½è‰²ï¼ŒåŒæ—¶placeholder çš„æ–‡å­—é«˜äº®ä¸ºç™½è‰²(æˆ–å…¶ä»–é¢œè‰²)ã€‚é€šè¿‡å¤´æ–‡ä»¶ä¸€çº§ä¸€çº§å¾€ä¸ŠæŸ¥æ‰¾ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªå¦‚ä¸‹å±žæ€§: 1@property(nullable, nonatomic,copy) NSAttributedString *attributedPlaceholder åˆ©ç”¨è¿™ä¸ªå±žæ€§ï¼Œç”¨å¦‚ä¸‹æ–¹æ³•è¿›è¡Œé¢œè‰²ä¿®æ”¹ï¼š 123//ç¬¬ä¸€ä¸ªå‚æ•°: éœ€è¦è¢«è®¾ç½®å±žæ€§çš„å­—ç¬¦ä¸²//ç¬¬äºŒä¸ªå‚æ•°: éœ€è¦è®¾ç½®çš„å±žæ€§ self.attributedPlaceholder = [[NSAttributedString alloc]initWithString:self.placeholder attributes:@&#123;NSForegroundColorAttributeName:[UIColor whiteColor]&#125;]; è¿™ä¸ªæ–¹æ³•è™½ç„¶è¾¾åˆ°æ•ˆæžœäº†ï¼Œä½†æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œé€šè¿‡å¦‚ä¸‹å›¾çš„æ–¹å¼ï¼Œéšä¾¿å†™ä¸€ä¸ªtextField ,ç„¶åŽæ‰“ä¸ŠçŸ­ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨textField å†…éƒ¨æœ‰placeholderLabelçš„å±žæ€§ï¼Œæ‰€ä»¥å¯ä»¥å°è¯•é€šè¿‡å¯¹è¯¥å±žæ€§è¿›è¡Œæ“ä½œï¼Œç›´æŽ¥ä¿®æ”¹é¢œè‰²ã€‚ä¸è¿‡é€šè¿‡ä¸‹é¢çš„è°ƒè¯•æ¡†å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªç§æœ‰å±žæ€§ã€‚æƒ³è¦å¯¹ç§æœ‰å±žæ€§è¿›è¡Œè®¿é—®å’Œä¿®æ”¹å¯ä»¥ä½¿ç”¨kvc æˆ–è€… runtime ,è¿™é‡Œä½¿ç”¨kvc ,æ–°å»ºä¸€ä¸ªç±»åˆ«ï¼Œæ·»åŠ å±žæ€§placeholderColor,åœ¨set æ–¹æ³•é‡Œé¢åŽ»è¿›è¡Œè®¾ç½®ï¼š 1234567891011121314151617181920ðŸŒ°ï¼šh æ–‡ä»¶#import &lt;UIKit/UIKit.h&gt;@interface UITextField (NXTextField)@property (nonatomic ,strong)UIColor *placeholdColor;@endm æ–‡ä»¶- (void)setPlaceholdColor:(UIColor *)placeholdColor&#123; //æ ¹æ®åˆ¤æ–­ï¼ŒtextField å†…éƒ¨çš„ placehold æ˜¯ä¸€ä¸ªlabel çš„æ ‡ç­¾ UILabel * placeholderLabel = [self valueForKey:@&quot;placeholderLabel&quot;]; placeholderLabel.textColor = placeholdColor;&#125;- (UIColor *)placeholdColor&#123; return nil; // æš‚æ—¶å…ˆä¸ç”¨ï¼Œè¿”å›žä¸€ä¸ªnil ï¼ŒåŽ»æŽ‰ç³»ç»Ÿçš„è­¦å‘Šâš ï¸&#125; ç„¶åŽå¯ä»¥åœ¨éœ€è¦è®¾ç½®çš„åœ°æ–¹å¼•å…¥category çš„å¤´æ–‡ä»¶ï¼Œé€šè¿‡å¦‚ä¸‹æ–¹å¼å³å¯è®¾ç½®é¢œè‰²ï¼š 1self.placeholdColor = [UIColor lightGrayColor]; é€šè¿‡ä¸Šé¢category çš„æ–¹å¼åŸºæœ¬å¯ä»¥æ»¡è¶³éœ€æ±‚ï¼Œä½†æ˜¯å¦‚æžœtextField å¦‚ä¸‹è®¾ç½®çš„æ—¶å€™å°±ä¼šå‡ºçŽ°æ— æ•ˆï¼š 123456789// è¿™æ ·è®¾ç½®æ˜¯å¯ä»¥çš„ï¼š self.placeholder = @&quot;44444&quot;; self.placeholdColor = [UIColor lightGrayColor];//å°†ä¸Šé¢çš„æ¢ä¸ªé¡ºåºæ‰§è¡Œï¼Œå°±ä¼šæ— æ•ˆ: self.placeholdColor = [UIColor lightGrayColor]; self.placeholder = @&quot;44444&quot;;//è¿™æ˜¯å› ä¸ºä¹‹å‰æ²¡æœ‰è®¾ç½®placeholderæ–‡å­—ï¼Œè®¾ç½®é¢œè‰²çš„æ—¶å€™é€šè¿‡æ–­ç‚¹å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶èŽ·å–ä¸åˆ°placeholderLabel,æ‰€ä»¥å¯¼è‡´è®¾ç½®é¢œè‰²æ— æ•ˆã€‚ è§£å†³è¿™ä¸ªé—®é¢˜å°±éœ€è¦ç”¨åˆ°runtime1.å…ˆå°† placeholderColor ä¿å­˜èµ·æ¥2.åœ¨è®¾ç½®placeholder çš„æ—¶å€™å†å–å‡ºæ¥è®¾ç½®é¢œè‰² 123456789101112131415161718192021222324- (void)setPlaceholdColor:(UIColor *)placeholdColor&#123; //å…ˆå°†placeholdColor å­˜èµ·æ¥ //å‚æ•°ä¸€ï¼šç»™å“ªä¸ªå¯¹è±¡æ·»åŠ æˆå‘˜å±žæ€§ //å‚æ•°äºŒï¼šæˆå‘˜å±žæ€§çš„åå­— //å‚æ•°ä¸‰ï¼šæˆå‘˜å±žæ€§çš„å€¼ objc_setAssociatedObject(self, @&quot;placeholdColor&quot;, placeholdColor, OBJC_ASSOCIATION_RETAIN_NONATOMIC); //æ ¹æ®åˆ¤æ–­ï¼ŒtextField å†…éƒ¨çš„ placehold æ˜¯ä¸€ä¸ªlabel çš„æ ‡ç­¾ UILabel * placeholderLabel = [self valueForKey:@&quot;placeholderLabel&quot;]; placeholderLabel.textColor = placeholdColor;&#125;- (UIColor *)placeholdColor&#123; return objc_getAssociatedObject(self, @&quot;placeholdColor&quot;);&#125;//è‡ªé¡¶ä¸€ä¸ªsetPlaceholderæ–¹æ³•ï¼Œåœ¨å†…éƒ¨1.å…ˆè®¾ç½®æ–‡å­—ã€‚ 2.è®¾ç½®é¢œè‰²- (void)setNX_Placeholder:(NSString *)placeholder&#123; self.placeholder = placeholder; self.placeholdColor = self.placeholdColor;&#125; ä¸Šé¢æ–¹æ³•æœ‰ä¸ªç¼ºç‚¹å°±æ˜¯æ¯æ¬¡è®¾ç½®placeholderæ–‡å­—è¿˜å¾—åŽ»è°ƒç”¨1[self setNX_Placeholder:@&quot;hhhh&quot;]; æ‰€ä»¥æƒ³è¦ç›´æŽ¥é€šè¿‡: self.placeholder = @â€hhhhâ€; åŽ»è®¾ç½®ï¼Œå°±éœ€è¦ç”¨åˆ°æ–¹æ³•äº¤æ¢ã€‚å› ä¸ºäº¤æ¢åªéœ€è¦åšä¸€æ¬¡æ“ä½œï¼Œæ‰€ä»¥ï¼Œæ”¾åˆ°+(void)loadæ–¹æ³•é‡ŒåŽ»æ“ä½œ,åœ¨categoryæ–‡ä»¶ä¸­åŠ å…¥ï¼š12345+ (void)load&#123; Method setPlaceholder = class_getInstanceMethod(self, @selector(setPlaceholder:)); Method setNx_Placeholder = class_getInstanceMethod(self, @selector(setNX_Placeholder:)); method_exchangeImplementations(setPlaceholder, setNx_Placeholder);&#125; #è®¡ç®—æ€»è¡Œæ•°çš„ä¸‡èƒ½å…¬å¼ 1row = (count -1 ) / column +1; #tableView è°ƒæ•´cell é—´è· ç”¨storyBoard æ‹–å‡ºæ¥çš„cell é»˜è®¤æ˜¾ç¤ºçš„æ˜¯å¦‚ä¸‹å›¾çš„é—´è·(å› ä¸ºè¦ä½¿ç”¨åˆ°é™æ€å•å…ƒæ ¼ï¼Œæ‰€ä»¥ç”¨åˆ°storyBoard,ä¸€èˆ¬æƒ…å†µä¸‹ç”¨xibæœ€å¥½) è¿™é‡Œç”¨çš„æ˜¯åˆ†ç»„styleï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡è®¾ç½®12self.tableView.sectionFooterHeight = 0; self.tableView.sectionHeaderHeight = 0; å¾—åˆ°å¦‚ä¸‹æ•ˆæžœ: å¯ä»¥çœ‹åˆ°æ¯ä¸ªåˆ†ç»„ä¹‹é—´çš„é—´è·å·²ç»æ²¡äº†ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªcell è·ç¦»é¡¶éƒ¨è¿˜æ˜¯æœ‰å¥½å¤§ä¸€éƒ¨åˆ†è·ç¦»ï¼Œè¿™é‡Œåˆ¤æ–­å¯èƒ½æ˜¯tableView çš„é—´è·,é€šè¿‡ä¸‹é¢æ‰“å° å¯ä»¥çœ‹åˆ°tableView è·ç¦»é¡¶éƒ¨ç¡®å®žæœ‰64 çš„åç§»é‡ï¼Œä½†æ˜¯è¿™ä¸ªåˆšå¥½æ˜¯ç©ºå‡ºå¯¼èˆªæ çš„é«˜åº¦ï¼Œæ‰€ä»¥æŽ’é™¤æ˜¯tableView çš„é—®é¢˜ï¼ŒæŽ¥ä¸‹æ¥å°±åˆ¤æ–­æ˜¯cell çš„é—®é¢˜ï¼Œé€šè¿‡ä¸‹é¢æ‰“å° å¯ä»¥çœ‹åˆ°åˆ†ç»„å†…éƒ¨ç¬¬ä¸€ä¸ªcell çš„Y å€¼é»˜è®¤æ˜¯35 ï¼Œé‚£ä¹ˆè¿™é‡Œå¯ä»¥åœ¨viewDidLoad æ–¹æ³•é‡Œè¿›è¡Œå¦‚ä¸‹è°ƒæ•´å°±å¯ä»¥ï¼ˆè¿™é‡Œéœ€è¦é—´éš”ä¸º10ï¼‰123self.tableView.sectionFooterHeight = 0; self.tableView.sectionHeaderHeight = 10; self.tableView.contentInset = UIEdgeInsetsMake(-25, 0, 0, 0); #è·³è½¬åˆ°ç½‘é¡µ 1.Safari openURL è‡ªå¸¦å¾ˆå¤šåŠŸèƒ½:è¿›åº¦æ¡ï¼Œåˆ·æ–°ï¼Œå‰è¿›ï¼Œå€’é€€ç­‰åŠŸèƒ½ã€‚ä½†æ˜¯éœ€è¦è·³å‡ºåˆ°å½“å‰åº”ç”¨ã€‚2.UIWebView åœ¨å½“å‰åº”ç”¨æ‰“å¼€ç½‘é¡µï¼Œå¹¶ä¸”å¸¦æœ‰Safariï¼ˆè‡ªå·±å®žçŽ°ï¼‰ï¼Œä¸èƒ½å®žçŽ°è¿›åº¦æ¡ã€‚3.SFSafariViewController ä¸“é—¨ç”¨æ¥æ˜¾ç¤ºç½‘é¡µ,æ—¢å¯ä»¥åœ¨å½“å‰åº”ç”¨æ˜¾ç¤ºç½‘é¡µï¼Œåˆå¯ä»¥æœ‰Safariçš„åŠŸèƒ½ã€‚iOS9ä»¥åŽæ‰å¯ä»¥ç”¨ã€‚4.WKWebView #åˆ¤æ–­view æ˜¯å¦è¢«åŠ è½½123456789101112éšä¾¿ä¸€ä¸ªéƒ½å¯ä»¥: UIViewController * vc = self.childViewControllers[button.tag]; if (vc.isViewLoaded) &#123;//å¦‚æžœå·²ç»è¢«åŠ è½½è¿‡å°±ä¸é‡å¤åŠ è½½(åŠ è½½view çš„æ—¶å€™ä¼šè°ƒç”¨ viewDidLoad) return ; &#125; UIView * view = vc.view; if (view.superview) &#123; // å¦‚æžœæœ‰çˆ¶view ï¼Œè¯´æ˜Žå·²ç»è¢«æ·»åŠ è¿‡ return; &#125; if (view.window) &#123; //å¦‚æžœæœ‰å®¹å™¨ï¼Œè¯´æ˜Žå·²ç»è¢«æ·»åŠ è¿‡ return; &#125; ä¸€äº›å…¨å±€å¸¸é‡ï¼Œå°½é‡ä½¿ç”¨externæ¥å¼•ç”¨ï¼Œå…¶æ¬¡å†é€‰æ‹©è€ƒè™‘Macro iOS constçš„ä½¿ç”¨å…³äºŽå…¨å±€å¸¸é‡çš„å®šä¹‰ #xib cell æ‹–çº¿æŠ¥é”™ï¼š Terminating app due to uncaught exception â€˜NSUnknownKeyExceptionâ€™, reason: â€˜[ setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key å¦‚ä¸‹å›¾ï¼Œæˆ‘å·²å¼€å§‹åœ¨File`s Owneré‡Œä¹Ÿè®¾ç½®äº†classæ˜¯NXTopicCell,æ‰€ä»¥ä¸€ç›´å‡ºé”™ï¼Œè¿™é‡Œå§ä»–æ¸…ç©ºï¼Œè®¾ç½®ä¸‹é¢çš„Topic Cell çš„classå¦‚ä¸‹å°±å¯ä»¥ xibæ‹–çš„UILabel æ²¡æœ‰è‡ªåŠ¨æ¢è¡Œï¼šè®¾ç½®çº¦æŸæ—¶ä¸è¦ç»™å®šé«˜åº¦å°±å¯ä»¥è‡ªåŠ¨æ¢è¡Œäº†ã€‚ #åœ¨heightForRowAtIndexPathèŽ·å–cell å´©æºƒhttp://www.jianshu.com/p/3da539540d21 åœ¨ç½‘ä¸Šçœ‹åˆ°æœ‰äººæ˜¯è¿™ä¹ˆèŽ·å–ï¼š1NXTopicCell * cell = (NXTopicCell *)[self tableView:tableView cellForRowAtIndexPath:indexPath]; è¯•äº†ä¸‹å¥½åƒæ˜¯å¯ä»¥ã€‚ å¥½åƒxib é‡Œè®¾ç½®çš„é«˜åº¦æ˜¯å®šæ­»çš„ï¼Œä¸ä¼šæ ¹æ®ä¸åŒå±å¹•åŽ»é‡æ–°è®¡ç®—é«˜åº¦ã€‚ ##é€€å‡ºé”®ç›˜ 1.ç›‘å¬scrollViewå®žæ—¶æ»šåŠ¨ä»£ç†æ–¹æ³•è°ƒç”¨[self.view endEditing:YES]æˆ–è€…[self.textField resignFirstResponse];2.touchBeginæ–¹æ³•é‡Œ,è°ƒç”¨[self.view endEditing:YES]æˆ–è€…[self.textField resignFirstResponse]; ##çˆ¶Viewæ·»åŠ æ‰‹åŠ¿ï¼Œå­Viewä¸è¦åŽ»å“åº”çˆ¶Viewç‚¹å‡»äº‹ä»¶iOS ç‚¹å‡»å­è§†å›¾ä¸è®©å…¶å“åº”çˆ¶è§†å›¾æ‰‹åŠ¿ åœ¨åšè¿™æ ·ä¸€ä¸ªç•Œé¢çš„æ—¶å€™ èƒŒæ™¯çš„è’™ç‰ˆå±‚æ˜¯ä¸€ä¸ªUIView,æŒ‰é’®çš„åˆ—è¡¨Viewæ·»åŠ åˆ°èƒŒæ™¯çš„è’™ç‰ˆViewä¸Šã€‚åœ¨è’™ç‰ˆå±‚æ·»åŠ ä¸€ä¸ªæ‰‹åŠ¿ï¼Œç‚¹å‡»dismissæŽ‰è¿™ä¸ªç•Œé¢å’Œè’™ç‰ˆã€‚ä½†æ˜¯é‡åˆ°é—®é¢˜å°±æ˜¯åœ¨ç‚¹å‡»æŒ‰é’®åˆ—è¡¨çš„Viewçš„æ—¶å€™ä¹Ÿå‡ºå‘äº†å•å‡»æ‰‹åŠ¿ã€‚è¿™ä¸ªå¥½åƒæ˜¯ç³»ç»Ÿé»˜è®¤çš„ï¼Œå‚è€ƒäº‹ä»¶å“åº”é“¾ã€‚ä¸ºäº†é¿å…è¿™ç§æ•ˆæžœï¼Œåœ¨æ‰‹åŠ¿è§¦å‘äº‹ä»¶ä¸­å¯ä»¥åˆ¤æ–­å½“å‰ç‚¹å‡»äº‹ä»¶æ˜¯å¦åœ¨çˆ¶Viewä¸Šï¼Œå¦‚æžœæ˜¯å­Viewä¸Šåˆ™ä¸åŽ»åšæ“ä½œï¼Œç‚¹å‡»åœ¨çˆ¶Viewä¸Šæ‰åŽ»åšdismissçš„æ“ä½œã€‚ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617- (void)dismissMoreActionView:(UITapGestureRecognizer *)tap&#123; //æ ¹ç»tagèŽ·å–å­view UIView *subView = [self viewWithTag:100]; /* BOOL contains = CGRectContainsPoint(CGRect rect, CGPoint point); åˆ¤æ–­ä¸€ä¸ªCGRectæ˜¯å¦åŒ…å«å†å¦ä¸€ä¸ªCGRecté‡Œé¢,å¸¸ç”¨ä¸Žæµ‹è¯•ç»™å®šçš„å¯¹è±¡ä¹‹é—´æ˜¯å¦åˆé‡å  - (CGPoint)locationInView:(UIView *)viewï¼š è¯¥å‡½æ•°è¿”å›žä¸€ä¸ªCGPointç±»åž‹çš„å€¼ï¼Œè¡¨ç¤ºè§¦æ‘¸åœ¨viewè¿™ä¸ªè§†å›¾ä¸Šçš„ä½ç½®ï¼Œè¿™é‡Œè¿”å›žçš„ä½ç½®æ˜¯é’ˆå¯¹viewçš„åæ ‡ */ // åˆ¤æ–­æ‰‹åŠ¿ç‚¹å‡»çš„ä½ç½®æ˜¯ä¸æ˜¯åŒ…å«åœ¨å­è§†å›¾ä¸Š if (!CGRectContainsPoint(subView.frame, [tap locationInView:self])) &#123; [self removeFromSuperview]; &#125;&#125; è°ƒæ•´å¯¼èˆªæ leftBarButtonItem å’Œ rightBarbuttonItem çš„åç§»é‡ å¦‚ä½•è°ƒæ•´å¯¼èˆªæ¡ä¸Šçš„leftBarButtonItemå’ŒrightBarButtonItemçš„ä½ç½® ####é‡ç‚¹ï¼šè¿™é‡Œéœ€è¦æåˆ°BarButtonSystemItemçš„æ ·å¼ï¼ UIBarButtonSystemItemFixedSpaceæˆ‘ä¸å¤šè¯´ è¯·çœ‹å®˜æ–¹è§£é‡Š:Blank space to add between other items. Only the width property is used when this value is set. åæ­£æˆ‘æ˜¯çœ‹ä¸æ‡‚ ã€‚å†æ¥è¯´è¯´negativeSpacer.width = 0 è¡¨ç¤ºleftBarButtonItemçš„xç¦»å±å¹•çš„å·¦è¾¹è¿˜æœ‰15åƒç´  åŒæ ·è¡¨ç¤ºrightBarButtonItemçš„CGRectGetMaxX()ç¦»å±å¹•çš„å³è¾¹è¿˜æœ‰15åƒç´  é‚£ä¹ˆå¥½åƒæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡negativeSpacer.widthæ¥è°ƒæ•´leftBarButtonItemçš„ä½ç½®ã€‚æžäº†è€åŠå¤©åŽŸæ¥å°±æ˜¯å¾—é è¿™å®¶ä¼™ã€‚ä½†æœ‰ä¸€ç‚¹ï¼šnegativeSpacer.widthèµ‹å€¼è´Ÿæ•°å¯¹äºŽleftBarButtonItemæ¥è¯´æ˜¯å·¦ç§»å¤šå°‘åƒç´  å¯¹äºŽrightBarButtonItemæ¥è¯´æ˜¯å³ç§»å¤šå°‘åƒç´  åä¹‹äº¦ç„¶. æˆ‘è¿™é‡Œæƒ³è¦è®¾ç½®å³è¾¹çš„item å³ç§»ä¸€ç‚¹ï¼Œå› ä¸ºé»˜è®¤çš„å¤ªåå·¦äº†ï¼š123456789101112131415161718UIButton * buyBtn = [[UIButton alloc]init]; buyBtn.frame = CGRectMake(0, 0, 80, 40); buyBtn.backgroundColor = [UIColor orangeColor]; [buyBtn setTitle:@&quot;é©¬ä¸Šé€‰è´­&quot; forState:UIControlStateNormal]; buyBtn.titleLabel.font = [UIFont systemFontOfSize:15]; [buyBtn addTarget:self action:@selector(buyItemAction) forControlEvents:UIControlEventTouchUpInside]; UIBarButtonItem * buyItem = [[UIBarButtonItem alloc]initWithCustomView:buyBtn]; UIBarButtonItem * space = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil]; space.width = -10; self.navigationItem.rightBarButtonItems = @[space,buyItem]; ##åŠ¨æ€ä¿®æ”¹UIButtonçš„title çš„æ—¶å€™å­—ä½“é—ªçƒçš„é—®é¢˜ï¼š UIButton-systemç±»åž‹ åŠ¨æ€æ”¹å˜title æ˜¾ç¤ºæ–‡å­—æ—¶é—ªåŠ¨(è§£å†³æ–¹æ¡ˆ) ##assign ä¿®é¥°ä»£ç†å¯¼è‡´é‡ŽæŒ‡é’ˆçš„é—®é¢˜ åœ¨ä¸‹é¢æ–¹æ³•ä¸­è°ƒç”¨äº†ä»£ç†ï¼Œå´©æºƒæŒ‡å‘è¿™é‡Œæ˜¾ç¤ºé‡ŽæŒ‡é’ˆçš„é”™è¯¯ï¼ŒçŒœæµ‹æ˜¯ç”±äºŽä»£ç†è¢«é‡Šæ”¾è€ŒåŽ»è°ƒç”¨äº§ç”Ÿçš„é—®é¢˜ã€‚ç‚¹è¿›åŽ»çœ‹åˆ°ä¹‹å‰ä»£ç†ä¿®é¥°ç”¨çš„æ˜¯assign ä¿®é¥°çš„ï¼Œæ”¹ä¸ºweak åŽå¥½åƒæ˜¯å¯ä»¥äº†ã€‚çŒœæµ‹åŽŸå› æ˜¯ç”±äºŽassign ä¿®é¥°çš„è¯ assignæ˜¯æŒ‡é’ˆèµ‹å€¼ï¼Œä¸å¯¹å¼•ç”¨è®¡æ•°æ“ä½œï¼Œä½¿ç”¨ä¹‹åŽå¦‚æžœæ²¡æœ‰ç½®ä¸ºnilï¼Œå¯èƒ½å°±ä¼šäº§ç”Ÿé‡ŽæŒ‡é’ˆï¼›è€Œweakä¸€æ—¦ä¸è¿›è¡Œä½¿ç”¨åŽï¼Œæ°¸è¿œä¸ä¼šä½¿ç”¨äº†ï¼Œå°±ä¸ä¼šäº§ç”Ÿé‡ŽæŒ‡é’ˆã€‚ 12345678910- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section&#123; if ([_delegate respondsToSelector:@selector(numberOfRowsInTableView:Insection:FromView:)]) &#123; NSInteger vRows = [_dataSource numberOfRowsInTableView:tableView Insection:section FromView:self]; mRowCount = vRows; return vRows; &#125; return 0;&#125; ##å•ä¾‹é—®é¢˜ åœ¨ä½¿ç”¨å•ä¾‹çš„æ—¶å€™ï¼Œç»å¸¸æ€§å°±æ˜¯ç›´æŽ¥å†™å‡ºä¸‹é¢çš„ä»£ç ã€‚ä¸è¿‡æœ€è¿‘åœ¨ä½¿ç”¨çš„æ—¶å€™ä¼šé‡åˆ°å•ä¾‹å¯¼è‡´å´©æºƒçš„é—®é¢˜ã€‚ä¸€å¼€å§‹åœ¨å†™ dispatch_once_t once_tokençš„æ—¶å€™æ²¡æœ‰ç”¨static æ¥ä¿®é¥°ï¼ŒåŽæ¥åŠ ä¸Šstaticæ¥ä¿®é¥°å°±å¥½äº†ã€‚ 12345678910111213+ (instancetype)shareInstance&#123; static DrawTextView * drawText = nil; static dispatch_once_t once_token; dispatch_once(&amp;once_token, ^&#123; drawText = [[DrawTextView alloc]initWithFrame:CGRectMake(kDeviceW * 0.5- TextLayerWidth * 0.5, kDeviceH * 0.5 - TextLayerHeight * 0.5, TextLayerWidth, TextLayerHeight)]; drawText.backgroundColor = [UIColor orangeColor]; &#125;); return drawText;&#125; ##åœ¨iPhone5s ï¼ˆ10.2ç³»ç»Ÿï¼‰æ‹¨æ‰“ç”µè¯æ²¡æœ‰å¼¹æ¡†æç¤ºï¼Œå…¶ä»–æ‰‹æœºï¼ˆ10.3ï¼‰æœ‰å¼¹æ¡†```// ç”¨è¿™ç§æ–¹æ³•çš„è¯ä¼šå‡ºçŽ°ä¸Šé¢çš„é—®é¢˜// NSString * phonNum = [NSString stringWithFormat:@â€tel://%@â€,self.footerModel.dav_phone]; NSString * phonNum = [NSString stringWithFormat:@&quot;telprompt://%@&quot;, self.footerModel.dav_phone]; ##æŽ§åˆ¶å™¨åˆ‡æ¢ä»Žä¸‹å¾€ä¸Šï¼Œå¹¶ä¸”æœ‰å¯¼èˆªæ ï¼š å¯ä»¥ç”¨CATransition åŠ¨ç”»ï¼Œæˆ–è€…ç›´æŽ¥ç”¨presentModalViewControllerã€‚http://www.cocoachina.com/bbs/read.php?tid=7668 ##æ”¹å˜SearchBar çš„å–æ¶ˆæŒ‰é’®é¢œè‰²ï¼Œå…‰æ ‡é¢œè‰² http://www.jianshu.com/p/66b5b777f5dc]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>ios</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å·¥ä½œä¸­çš„å‘]]></title>
    <url>%2F2017%2F08%2F26%2F%E5%B7%A5%E4%BD%9C%E4%B8%AD%E7%9A%84%E5%9D%91%2F</url>
    <content type="text"><![CDATA[1.é€šè¿‡xibåŠ è½½çš„æŽ§ä»¶åœ¨viewDidLoad ä¸­é‡æ–°è®¡ç®—å¸ƒå±€ä¸å‡†ç¡®çš„é—®é¢˜ åœ¨çˆ±å±±é—¨å®žæ—¶ä¸Šé—¨æ¨¡å—ï¼Œç”±äºŽä¹‹å‰æ²¡æœ‰åŠ ç½‘ç»œæç¤ºå™¨æˆ–è€…æ²¡ç½‘çš„ç©ºç™½é¡µä¹‹ç±»çš„ï¼Œåœ¨ç½‘ç»œæƒ…å†µå·®çš„æƒ…å†µä¸‹ï¼Œç›´æŽ¥å°±æ˜¯ä¸€ä¸ªç©ºç™½é¡µæ”¾åœ¨é‚£é‡Œï¼Œç”¨æˆ·ä½“éªŒç‰¹åˆ«ä¸å¥½ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦åŠ ä¸Šä¸€ä¸ªç½‘ç»œçš„æç¤ºå™¨åœ¨åŠ è½½çš„æ—¶å€™è¿›è¡Œå¼¹çª—æç¤ºç”¨æˆ·ï¼Œè®°è½½æˆåŠŸçš„è¯å°±ç›´æŽ¥æ˜¾ç¤ºæ•°æ®ï¼Œå¤±è´¥çš„è¯å°±æç¤ºç½‘ç»œé—®é¢˜ã€‚è¿™ä¸ªç›´æŽ¥ç”¨SVProgresså°±å¯ä»¥ã€‚ç”±äºŽè¿™é‡Œçš„ç•Œé¢å¸ƒå±€æ¯”è¾ƒå›ºå®šï¼Œæ‰€ä»¥æœ€å¥½å¯ä»¥å†åšä¸€ä¸ªæœ¬åœ°ç¼“å­˜ï¼Œåˆ©ç”¨FMDBå°†ä¸Šä¸€æ¬¡çš„æ•°æ®å­˜åˆ°æœ¬åœ°ï¼Œä¸‹æ¬¡æ‰“å¼€çš„è¯å…ˆä»Žæ•°æ®åº“åŽ»èŽ·å–æ•°æ®ï¼Œæ²¡æœ‰çš„è¯å†åŽ»ç½‘ç»œè¯·æ±‚ã€‚è¿™é‡Œé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼ŒæŠ˜è…¾äº†å¤§åŠä¸ªä¸Šåˆã€‚å°±æ˜¯æ¯æ¬¡é€šè¿‡æœ¬åœ°ç¼“å­˜åŽ»åŠ è½½æ•°æ®çš„æ—¶å€™æ»‘åŠ¨èŒƒå›´æ€»æ˜¯ä¸å‡†ï¼Œåœ¨viewDidLoadä¸­å·²ç»è®¡ç®—å¥½äº†scrollView çš„é«˜åº¦å’ŒtableView çš„é«˜åº¦ï¼Œä½†æ˜¯åœ¨viewDidDissAppear ä¸­å†åŽ»æ‰“å°çš„è¯ä¼šå‘çŽ°å°ºå¯¸å¹¶ä¸æ˜¯æˆ‘ä»¬è®¡ç®—çš„é‚£ä¸ªç»“æžœã€‚ä¸‹æ‹‰åˆ·æ–°æˆ–è€…ç›´æŽ¥åŽ»åŠ è½½ç½‘ç»œçš„æ•°æ®çš„æ—¶å€™å°±æ²¡é—®é¢˜ã€‚åŽæ¥ä¸€ç›´è°ƒè¯•æŸ¥æ‰¾çŒœæµ‹åº”è¯¥æ˜¯xib çš„é—®é¢˜ï¼Œå› ä¸ºè¿™é‡Œçš„scrollView å’Œ tableView éƒ½æ˜¯é€šè¿‡xib åŽ»åŠ è½½çš„ï¼Œé€šè¿‡xib åŠ è½½çš„æ–‡ä»¶åœ¨viewDidLoadä¸­åŠ è½½çš„æ—¶å€™å¹¶ä¸ä¼šåŽ»å¸ƒå±€frame ï¼Œåªæ˜¯æ‹¿åˆ°xib ä¸­è®¾ç½®çš„å¤§å°å±žæ€§ï¼Œåªæœ‰åœ¨ viewDidLayoutSubViews é‡Œæ‰ä¼šåŽ»æ ¹æ®å¸ƒå±€åŽ»ç¡®å®šæŽ§ä»¶çš„æœ€ç»ˆå°ºå¯¸(ä¸è¿‡æ·»åŠ view çš„æ“ä½œä¸èƒ½æ”¾åœ¨è¿™é‡Œï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•ä¼šè°ƒç”¨å¤šæ¬¡) #####2.å¯¼èˆªæ éšè— push åˆ°ä¸‹ä¸ªç•Œé¢å†æ‰‹åŠ¿è¿”å›žçš„æ—¶å€™æ˜¾ç¤ºå’Œéšè—çš„é—®é¢˜ã€‚å¦‚ä¸‹ï¼š å¥½å¤šé¡¹ç›®ä¸­éƒ½ä¼šæœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œå¯¼èˆªæ é€æ˜Žæˆ–è€…éšè—ï¼Œä½†æ˜¯push åˆ°ä¸‹ä¸€ä¸ªç•Œé¢ï¼Œå¦‚æžœç”¨æ‰‹åŠ¿è¿”å›žçš„è¯å°±ä¼šå‡ºçŽ°å¦‚ä¸Šçš„é—®é¢˜ï¼Œ æ¯”å¦‚ç§¯åˆ†å•†åŸŽï¼šä¸ªäººä¸­å¿ƒç•Œé¢éœ€è¦éšè—å¯¼èˆªæ ï¼Œè®¾ç½®å¦‚ä¸‹ï¼š12345678- (void)viewWillAppear:(BOOL)animated&#123; [super viewWillAppear:animated]; [self.navigationController setNavigationBarHidden:YES animated:animated]; [self getCenter];&#125; ç‚¹å‡»ç§¯åˆ†å•†åŸŽéœ€è¦æ˜¾ç¤ºå¯¼èˆªæ ï¼Œè®¾ç½®å¦‚ä¸‹ï¼š12345678910- (void)viewWillAppear:(BOOL)animated&#123; [super viewWillAppear:animated];// [Glob showTabBar]; [[self rdv_tabBarController] setTabBarHidden:YES animated:YES]; [self.navigationController setNavigationBarHidden:NO animated:YES];&#125; å¦‚æžœåªæ˜¯è¿™æ ·è®¾ç½®çš„è¯æ‰‹åŠ¿è¿”å›žçš„è¯å°±ä¼šå‡ºçŽ°ä¸Šé¢çš„é—®é¢˜ã€‚ç½‘ä¸Šæ‰¾äº†å„ç§èµ„æ–™å’Œä¸‰æ–¹åº“ï¼Œæ¯”å¦‚ è®©æˆ‘ä»¬ä¸€æ¬¡æ€§è§£å†³å¯¼èˆªæ çš„æ‰€æœ‰é—®é¢˜ ),ç”±äºŽä¹‹å‰é¡¹ç›®ä¸­ä½¿ç”¨çš„tabBar æ˜¯ ä¸‰æ–¹çš„RDVTabBarControllerï¼Œæ‰€ä»¥ç”¨ä¸Šé¢æ–‡ç« ä¸­çš„ä¸‰æ–¹æ€»ä¼šå‡ºå…ˆæ‰‹åŠ¿è¿”å›žçš„æ—¶å€™ä¸Šä¸€ä¸ªæŽ§åˆ¶å™¨è¢«ä¸€ä¸ªç©ºç™½çš„UIViewæŒ¡ä½çš„æƒ…å†µã€‚æ‰€ä»¥åˆå¼€å§‹æ‰¾å…¶ä»–çš„åŒæ ·ä¸æ˜¯å¾ˆå®Œç¾Žã€‚æœ€åŽæŠ±ç€çžŽçŒ«ç¢°æ­»è€—å­çš„å¿ƒæ€ï¼Œå°±è¯•è¯•ç½‘ä¸Šçš„ä¸€äº›å»ºè®®ï¼Œé‡‡ç”¨å¦‚ä¸‹å†™æ³•ï¼Œåœ¨ç§¯åˆ†å•†åŸŽç•Œé¢åŠ ä¸Šå¦‚ä¸‹ä»£ç ï¼š12345- (void)viewWillDisappear:(BOOL)animated&#123; [self.navigationController setNavigationBarHidden:NO animated:YES]; [super viewWillDisappear:animated] ; // åˆ‡è®°è¦åŠ è¿™ä¸ªï¼Œä¸ç„¶æ²¡æ•ˆæžœ&#125; ä¸€å¼€å§‹åœ¨ä¸€ä¸ªç©ºç™½çš„é¡¹ç›®ä¸­åšäº†æµ‹è¯•ï¼Œè¿™æ ·ç¡®å®žæ˜¯å¯ä»¥äº†ï¼Œä½†æ˜¯æ”¾åˆ°å…¬å¸é¡¹ç›®å´è¿˜æ˜¯æ²¡ç”¨ï¼Œä¸€å¼€å§‹æ€€ç–‘æ˜¯ [super viewWillDisappear:animated]æ–¹æ³•åº”è¯¥æ”¾åœ¨æœ€åŽè°ƒç”¨ï¼ŒåŽæ¥æµ‹è¯•æ”¾åœ¨å‰é¢å’ŒåŽé¢éƒ½æ²¡åŒºåˆ«ã€‚æœ€åŽå‘çŽ°é—®é¢˜æ˜¯åœ¨ä¸ªäººä¸­å¿ƒç•Œé¢ï¼Œä¸€å¼€å§‹ä¸ªäººä¸­å¿ƒç•Œé¢éšè—å¯¼èˆªæ çš„æ—¶å€™ï¼ŒåŠ¨ç”»é‚£å—è®¾ç½®çš„æ˜¯NOï¼š1[self.navigationController setNavigationBarHidden:YES animated:NO]; æœ€åŽæ”¹æˆå¦‚ä¸‹ï¼š123[self.navigationController setNavigationBarHidden:YES animated:animated];è‡³äºŽè¿™é‡Œçš„animated å†™æˆ æ²¡æœ‰å†™æˆYES OR NO æ˜¯å› ä¸ºåœ¨ç½‘ä¸Šçœ‹åˆ°è¿‡ç³»ç»Ÿè¿”å›žçš„å±žæ€§ä¸åªæ˜¯è¿™ä¸¤ä¸ªï¼ˆè™½ç„¶æˆ‘ä¹Ÿä¸æ‡‚ï¼‰ä¸è¿‡è¿™é‡Œanimated å†™æˆYES ä¹Ÿå¯ä»¥ã€‚ å‘çŽ°å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚æ•ˆæžœå¦‚ä¸‹ï¼š Perfect!æ›´æ–°åŽæ¥å‘çŽ°åªéœ€è¦åœ¨ä¸ªäººä¸­å¿ƒè®¾ç½®1[self.navigationController setNavigationBarHidden:YES animated:animated] // è¿™é‡Œanimated å†™æˆYES ä¹Ÿå¯ä»¥ ä¸ç”¨å†åœ¨å…¶ä»–ç•Œé¢å†æ·»åŠ 12345- (void)viewWillDisappear:(BOOL)animated&#123; [self.navigationController setNavigationBarHidden:NO animated:YES]; [super viewWillDisappear:animated] ; // åˆ‡è®°è¦åŠ è¿™ä¸ªï¼Œä¸ç„¶æ²¡æ•ˆæžœ&#125; ä¹Ÿä¸€æ ·å¯ä»¥å®žçŽ°æ•ˆæžœ ######3.ä½¿ç”¨å­—å…¸è½¬æ¨¡åž‹çš„æ—¶å€™é‡åˆ°å´©æºƒ NSInvalidArgumentException -[__NSTaggedPointerString unsignedLongLongValue]: unrecognized selector sent to instance è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯å› ä¸º64bitä¸­ï¼ŒNSString ä¸­æ²¡æœ‰unsignedLongLongValueè¿™ä¸ªæ–¹æ³•äº†ï¼Œ è€Œå½“å­—å…¸ä¸­objçš„ç±»åž‹æ˜¯NSStringç±»åž‹ï¼Œå®žä½“ä¸­çš„keyå¯¹åº”çš„å±žæ€§æ˜¯NSUintegerç±»åž‹ï¼ŒsetValue:obj forKey:key ä¼šè‡ªåŠ¨åšå¦‚ä¸‹å¤„ç†ï¼š[obj unsignedLongLongValue] å°†valueè½¬ä¸ºå¯¹åº”çš„å±žæ€§ç±»åž‹ï¼Œè¿™å°±å¯¼è‡´64bitä¸­æ‰¾ä¸åˆ°è¯¥æ–¹æ³•è€Œcrashã€‚è§£å†³æ˜¯ï¼Œå¯¹NSStringå†™ä¸€ä¸ªcategoryï¼Œé‡æ–°å†™ä¸€ä¸ªunsignedLongLongValueçš„æ–¹æ³•ï¼š 123-(NSUinteger)unsignedLongLongValue &#123; return [self integerValue];&#125; æˆ–è€… é¿å… è®©ç³»ç»ŸåšNSString-&gt;NSUIntegerçš„ç±»åž‹è£…æ¢]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>ios</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¸…é™¤ç¼“å­˜]]></title>
    <url>%2F2017%2F08%2F26%2F%E6%B8%85%E9%99%A4%E7%BC%93%E5%AD%98%2F</url>
    <content type="text"><![CDATA[çŽ°åœ¨çš„å¤§å¤šæ•°APPéƒ½å¸¦æœ‰ç¼“å­˜åŠŸèƒ½ï¼Œå°¤å…¶æ˜¯ä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹æ¡†æž¶ï¼Œæ¯”å¦‚SDWebImage å°±è‡ªå¸¦ç¼“å­˜åŠŸèƒ½ã€‚å½“ç”¨äº†ä¸€æ®µæ—¶é—´åŽï¼Œç¼“å­˜å°±ä¼šè¶Šæ¥æ„ˆå¤§ï¼Œå¦‚æžœä¸æ¸…é™¤çš„è¯å°±ä¼šå½±å“ç”¨æˆ·ä½“éªŒå’Œæ€§èƒ½ï¼Œæ‰€ä»¥å¤§å¤šðŸ“šAPPåŠ äº†æ¸…é™¤ç¼“å­˜çš„åŠŸèƒ½ã€‚è¿™é‡Œçš„ä¸»è¦å®žçŽ°æ€è·¯ä¹Ÿæ˜¯æ ¹æ®SDWebImage çš„æ€è·¯åŽ»å®žçŽ°ã€‚è¿™é‡Œéœ€è¦ç”¨åˆ°ä¸€ä¸ª simpholderså·¥å…·å¯ä»¥ç›´æŽ¥æŸ¥çœ‹æ²™ç›’ä¸‹çš„ä¸œè¥¿ã€‚ #1.èŽ·å–ç¼“å­˜ æ—¢ç„¶æ˜¯å‚è€ƒSDWebImageåŽ»å®žçŽ°ï¼Œé‚£ä¹ˆé¦–å…ˆå°±æ˜¯è¿›åŽ»çœ‹çœ‹ä»–æ˜¯æ€Žä¹ˆå®žçŽ°çš„ï¼Œé¦–å…ˆå…ˆå¯¼å…¥ #import &lt;SDWebImage/SDImageCache.h&gt;å¤´æ–‡ä»¶ï¼Œè¿™æ˜¯SDWebImage çš„ä¸€ä¸ªç®¡ç†ç¼“å­˜çš„ç±»ï¼Œç‚¹è¿›åŽ»åœ¨æ–‡ä»¶ä¸­æœç´¢å…³é”®è¯cache,ä¼šçœ‹åˆ°å¥½å¤šç»“æžœï¼Œä¸€ç›´å¾€ä¸‹æ‹‰ï¼Œä¼šçœ‹åˆ°è¿™ä¹ˆå‡ ä¸ªæ–¹æ³•ï¼š 1234567æˆ‘ä»¬çœ‹åˆ°é‡Œé¢æœ‰è¿™æ ·ä¸€ä¸ªæ–¹æ³•ï¼Œå¾ˆæ˜Žæ˜¾è¿™ä¸ªæ˜¯æˆ‘ä»¬å¸¸å†™çš„å•ä¾‹ã€‚å¾…ä¼šå„¿ä¼šç”¨åˆ°/** * Returns global shared cache instance * * @return SDImageCache global instance */+ (SDImageCache *)sharedImageCache; å†å¾€ä¸‹å°±çœ‹åˆ°ä¸‹é¢çš„æ–¹æ³•ï¼š è¿™äº›æ ¹æ®å­—é¢æ„æ€å¾ˆå®¹æ˜“çœ‹å‡ºæ¥éƒ½æ˜¯å¹²ä»€ä¹ˆçš„ã€‚æ—¢ç„¶è¿™é‡Œæˆ‘ä»¬çš„ç¬¬ä¸€æ­¥æ˜¯æƒ³å…ˆèŽ·å–ç¼“å­˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸»è¦å…ˆçœ‹ä¸€ä¸‹getSizeæ–¹æ³•ï¼Œç‚¹å‡»è¿›åŽ»ä¼šçœ‹åˆ°å¦‚ä¸‹æ–¹æ³•ï¼š 123456789101112- (NSUInteger)getSize &#123; __block NSUInteger size = 0; dispatch_sync(self.ioQueue, ^&#123; NSDirectoryEnumerator *fileEnumerator = [_fileManager enumeratorAtPath:self.diskCachePath]; for (NSString *fileName in fileEnumerator) &#123; NSString *filePath = [self.diskCachePath stringByAppendingPathComponent:fileName]; NSDictionary *attrs = [[NSFileManager defaultManager] attributesOfItemAtPath:filePath error:nil]; size += [attrs fileSize]; &#125; &#125;); return size;&#125; è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°éœ€è¦ç”¨åˆ°ä¸€ä¸ª _fileManagerçš„å¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ªNSFileManager çš„å¯¹è±¡,æˆ‘ä»¬å…ˆå›žåˆ°æˆ‘ä»¬çš„ç±»æ–‡ä»¶ä¸­ï¼ŒåŽ»è°ƒç”¨ä¸€ä¸‹getSize æ–¹æ³•èŽ·å–ç¼“å­˜ã€‚é€šè¿‡ä¸Šé¢çš„å·¥å…·æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹SDWebImageçš„ç¼“å­˜æ–‡ä»¶ï¼šåœ¨defaultæ–‡ä»¶ä¸‹é¢å°±æ˜¯ 12345 NSUInteger cach = [[SDImageCache sharedImageCache] getSize]; NXLog(@&quot;sdweb-----caches:%lu&quot;,(unsigned long)cach);æ‰“å°ç»“æžœå¦‚ä¸‹2017-02-06 23:41:09.554 BaiSi[44360:1314372] sdweb-----caches:2824429 é€šè¿‡å³é”®æŸ¥çœ‹æ–‡ä»¶ï¼Œå¾—åˆ°ç»“æžœå¦‚ä¸‹ï¼Œæ¯”æ‰“å°ç»“æžœå¤§æ˜¯å› ä¸ºè¿™é‡Œè¿˜åŒ…æ‹¬äº†éšè—æ–‡ä»¶.DS æˆ‘ä»¬ä¹Ÿä»¥èŽ·å–è¿™ä¸ªæ–‡ä»¶å¤¹ç¼“å­˜çš„å¤§å°ä¸ºè¯•éªŒï¼Œçœ‹çœ‹è‡ªå·±å†™çš„ç»“æžœæ˜¯å¦å’ŒSD çš„ä¸€æ ·ï¼š12345678910111213141516- (void)clearCach&#123; //1.å…ˆèŽ·å–cache ç›®å½•çš„è·¯å¾„ NSString * cachePath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject]; // è¿™é‡Œå…ˆä»¥èŽ·å– default æ–‡ä»¶å¤¹å¤§å°åšå®žéªŒï¼Œçœ‹çœ‹æ˜¯å¦å’Œ SDImageCache èŽ·å–çš„ä¸€æ · NSString * directorPath = [cachePath stringByAppendingPathComponent:@&quot;default&quot;]; //2.å£°æ˜Žä¸€ä¸ªæ–‡ä»¶ç®¡ç†å¯¹è±¡ NSFileManager * fileManager = [NSFileManager defaultManager]; //3.åœ¨ SDImageCache çš„getSize æ–¹æ³•é‡Œé¢æˆ‘ä»¬çœ‹åˆ°è°ƒç”¨äº†ä¸€ä¸ªæ–¹æ³• NSDictionary *attrs = [[NSFileManager defaultManager] attributesOfItemAtPath:filePath error:nil];æ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ¨¡ä»¿ä»–åŽ»åš NSDictionary * attrs = [fileManager attributesOfItemAtPath:directorPath error:nil]; //4.æœ€åŽèŽ·å–size NSUInteger size = [attrs fileSize]; NXLog(@&quot;custom----size:%lu&quot;,(unsigned long)size); //æ‰“å°ç»“æžœå¦‚ä¸‹ // 2017-02-06 23:47:01.843 BaiSi[44442:1317486] custom----size:136&#125; å¯ä»¥çœ‹åˆ°æœ€åŽçš„ç»“æžœå’ŒSDå·®äº†ç›¸å½“å¤šï¼Œåˆæ­¥åˆ¤æ–­è¿™ä¸ªå¯èƒ½ä¸å¯ä»¥èŽ·å–æ–‡ä»¶å¤¹çš„å¤§å°ï¼Œæ™ºèƒ½æˆ–è®¸æ–‡ä»¶çš„å¤§å°ï¼Œä¸ºäº†éªŒè¯ï¼Œæˆ‘ä»¬æ‹¼æŽ¥ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„ï¼Œåœ¨ä¸Šé¢ç¬¬ä¸€æ­¥èŽ·å–è·¯å¾„ä¸‹é¢å†åŠ ä¸Šä¸€ä¸ªimage çš„è·¯å¾„ï¼Œå¦‚ä¸‹ï¼š12345NSString * imagePath = [directorPath stringByAppendingPathComponent:@&quot;com.hackemist.SDWebImageCache.default/aa96232fe024aeba562815618fd5e02a.jpg&quot;];ç¬¬ä¸‰æ­¥é‡Œçš„directorPath æ”¹æˆ imagePath ,è¿è¡Œ//æ‰“å°ç»“æžœå¦‚ä¸‹ï¼š2017-02-07 00:00:04.244 BaiSi[44688:1326243] custom----size:169817 æˆ‘ä»¬ç›´æŽ¥é€šè¿‡æŸ¥çœ‹å›¾ç‰‡å±žæ€§ç»“æžœå¦‚ä¸‹ï¼š å’Œæˆ‘ä»¬å¾—åˆ°çš„ç»“æžœä¸€æ¨¡ä¸€æ ·ï¼Œè¯´æ˜Žè¯¥å±žæ€§æ–¹æ³•åªæ˜¯èŽ·å–æ–‡ä»¶çš„å¤§å°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦éåŽ†ç›®çš„æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå°†å¤§å°ç´¯åŠ èµ·æ¥ï¼Œå°±æ˜¯è¯¥æ–‡ä»¶å¤¹çš„æ€»å¤§å°ã€‚åœ¨SD çš„ getSize æ–¹æ³•é‡Œé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»–è°ƒç”¨çš„æ˜¯ NSDirectoryEnumerator *fileEnumerator = [_fileManager enumeratorAtPath:self.diskCachePath];æ–¹æ³•ï¼Œç„¶åŽåŽ»éåŽ†fileEnumeratorã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨å¦ä¸€ä¸ªå±žæ€§subpathsAtPath:directorPathï¼Œæ”¹å†™clearCachå¦‚ä¸‹ï¼š1234567891011121314151617181920212223- (void)clearCach&#123; //1.å…ˆèŽ·å–cache ç›®å½•çš„è·¯å¾„ NSString * cachePath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject]; // è¿™é‡Œå…ˆä»¥èŽ·å– default æ–‡ä»¶å¤¹å¤§å°åšå®žéªŒï¼Œçœ‹çœ‹æ˜¯å¦å’Œ SDImageCache èŽ·å–çš„ä¸€æ · NSString * directorPath = [cachePath stringByAppendingPathComponent:@&quot;default&quot;]; //2.å£°æ˜Žä¸€ä¸ªæ–‡ä»¶ç®¡ç†å¯¹è±¡ NSFileManager * fileManager = [NSFileManager defaultManager]; //3.åœ¨ SDImageCache çš„getSize æ–¹æ³•é‡Œé¢æˆ‘ä»¬çœ‹åˆ°è°ƒç”¨äº†ä¸€ä¸ªæ–¹æ³• NSDictionary *attrs = [[NSFileManager defaultManager] attributesOfItemAtPath:filePath error:nil];æ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ¨¡ä»¿ä»–åŽ»åš //è¿™ä¸ªå¯ä»¥èŽ·å–æ‰€æœ‰çš„å­æ–‡ä»¶åŠå­æ–‡ä»¶ä¸‹çš„æ–‡ä»¶ NSArray * subPaths = [fileManager subpathsAtPath:directorPath]; NXLog(@&quot;subPaths:%@&quot;,subPaths); NSDictionary * attrs = [fileManager attributesOfItemAtPath:directorPath error:nil]; //4.æœ€åŽèŽ·å–size NSUInteger size = [attrs fileSize]; NXLog(@&quot;custom----size:%lu&quot;,(unsigned long)size); //æ‰“å°ç»“æžœå¦‚ä¸‹ // 2017-02-06 23:47:01.843 BaiSi[44442:1317486] custom----size:136&#125; æ‰“å°ç»“æžœï¼š å¯ä»¥çœ‹åˆ° è¿™ä¸ªæ–¹æ³•èŽ·å–åˆ°äº†default æ–‡ä»¶å¤¹ä¸‹çš„å­æ–‡ä»¶å¤¹åŠå­æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ä»¥åŠéšè—æ–‡ä»¶.æŽ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­ä¿®æ”¹clearCach æ–¹æ³•ï¼š123456789101112131415161718192021222324- (void)clearCach&#123; //1.å…ˆèŽ·å–cache ç›®å½•çš„è·¯å¾„ NSString * cachePath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject]; // è¿™é‡Œå…ˆä»¥èŽ·å– default æ–‡ä»¶å¤¹å¤§å°åšå®žéªŒï¼Œçœ‹çœ‹æ˜¯å¦å’Œ SDImageCache èŽ·å–çš„ä¸€æ · NSString * directorPath = [cachePath stringByAppendingPathComponent:@&quot;default&quot;]; //2.å£°æ˜Žä¸€ä¸ªæ–‡ä»¶ç®¡ç†å¯¹è±¡ NSFileManager * fileManager = [NSFileManager defaultManager]; //3.åœ¨ SDImageCache çš„getSize æ–¹æ³•é‡Œé¢æˆ‘ä»¬çœ‹åˆ°è°ƒç”¨äº†ä¸€ä¸ªæ–¹æ³• NSDictionary *attrs = [[NSFileManager defaultManager] attributesOfItemAtPath:filePath error:nil];æ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ¨¡ä»¿ä»–åŽ»åš //è¿™ä¸ªå¯ä»¥èŽ·å–æ‰€æœ‰çš„å­æ–‡ä»¶åŠå­æ–‡ä»¶ä¸‹çš„æ–‡ä»¶ NSArray * subPaths = [fileManager subpathsAtPath:directorPath]; NSUInteger totoalSize = 0 ; for (NSString * path in subPaths) &#123; NSString * filePath = [directorPath stringByAppendingPathComponent:path]; NSDictionary * attrs = [fileManager attributesOfItemAtPath:filePath error:nil]; //4.æœ€åŽèŽ·å–size totoalSize += [attrs fileSize]; &#125; NXLog(@&quot;custom----size:%lu&quot;,(unsigned long)totoalSize);&#125; æœ€ç»ˆæ‰“å°ç»“æžœå¦‚ä¸‹ åŸºæœ¬ä¸Šå’ŒSD è‡ªå·±èŽ·å–çš„å¤§å°å·®ä¸å¤šï¼Œè¿™é‡Œæ¯”SD çš„å¤§æ˜¯å› ä¸ºè¿™é‡Œæ²¡æœ‰æŽ’é™¤éšè—æ–‡ä»¶.DS_Storeå’Œä¸‹é¢é‚£ä¸ªdefault æ–‡ä»¶å¤¹,æŽ¥ä¸‹æ¥å¯¹è¿™ä¸¤ä¸ªæ–‡ä»¶è¿›è¡ŒæŽ’é™¤ï¼š123456789101112131415161718192021222324252627282930313233- (void)clearCach&#123; //1.å…ˆèŽ·å–cache ç›®å½•çš„è·¯å¾„ NSString * cachePath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject]; // è¿™é‡Œå…ˆä»¥èŽ·å– default æ–‡ä»¶å¤¹å¤§å°åšå®žéªŒï¼Œçœ‹çœ‹æ˜¯å¦å’Œ SDImageCache èŽ·å–çš„ä¸€æ · NSString * directorPath = [cachePath stringByAppendingPathComponent:@&quot;default&quot;]; //2.å£°æ˜Žä¸€ä¸ªæ–‡ä»¶ç®¡ç†å¯¹è±¡ NSFileManager * fileManager = [NSFileManager defaultManager]; //3.åœ¨ SDImageCache çš„getSize æ–¹æ³•é‡Œé¢æˆ‘ä»¬çœ‹åˆ°è°ƒç”¨äº†ä¸€ä¸ªæ–¹æ³• NSDictionary *attrs = [[NSFileManager defaultManager] attributesOfItemAtPath:filePath error:nil];æ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ¨¡ä»¿ä»–åŽ»åš //è¿™ä¸ªå¯ä»¥èŽ·å–æ‰€æœ‰çš„å­æ–‡ä»¶åŠå­æ–‡ä»¶ä¸‹çš„æ–‡ä»¶ NSArray * subPaths = [fileManager subpathsAtPath:directorPath]; NSUInteger totoalSize = 0 ; for (NSString * path in subPaths) &#123; NSString * filePath = [directorPath stringByAppendingPathComponent:path]; //åˆ¤æ–­æ˜¯å¦æ˜¯éšè—æ–‡ä»¶ if ([filePath containsString:@&quot;.DS&quot;]) &#123; continue; &#125; //åˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶å¤¹ BOOL isDirector; BOOL fileExist = [fileManager fileExistsAtPath:filePath isDirectory:&amp;isDirector]; if (!fileExist || isDirector) &#123; continue; &#125; NSDictionary * attrs = [fileManager attributesOfItemAtPath:filePath error:nil]; //4.æœ€åŽèŽ·å–size totoalSize += [attrs fileSize]; &#125; NXLog(@&quot;custom----size:%lu&quot;,(unsigned long)totoalSize); &#125; è¿™ä¸ªæ—¶å€™å¾—åˆ°çš„ç»“æžœå°±å’ŒSD çš„ä¸€æ ·äº†ã€‚ä¸Šé¢çš„ç»“æžœåŸºæœ¬ä¸Šå·²ç»å¯ä»¥æ»¡è¶³åŠŸèƒ½äº†ï¼Œä¸è¿‡ä¸ºäº†å¤ç”¨æ€§ï¼Œè¿˜å¾—è¿›è¡Œä¸€äº›ä¿®æ”¹ï¼Œæœ€å¥½æ˜¯èƒ½ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶å¤¹çš„è·¯å¾„ç„¶åŽèŽ·å–å¤§å°ï¼Œè¿™é‡Œå§æ–¹æ³•åæ”¹äº†ä¸€ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839- (NSUInteger)getFileSize:(NSString *)directorPath&#123; //2.å£°æ˜Žä¸€ä¸ªæ–‡ä»¶ç®¡ç†å¯¹è±¡ NSFileManager * fileManager = [NSFileManager defaultManager]; //3.åœ¨ SDImageCache çš„getSize æ–¹æ³•é‡Œé¢æˆ‘ä»¬çœ‹åˆ°è°ƒç”¨äº†ä¸€ä¸ªæ–¹æ³• NSDictionary *attrs = [[NSFileManager defaultManager] attributesOfItemAtPath:filePath error:nil];æ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ¨¡ä»¿ä»–åŽ»åš //è¿™ä¸ªå¯ä»¥èŽ·å–æ‰€æœ‰çš„å­æ–‡ä»¶åŠå­æ–‡ä»¶ä¸‹çš„æ–‡ä»¶ NSArray * subPaths = [fileManager subpathsAtPath:directorPath]; NSUInteger totoalSize = 0 ; for (NSString * path in subPaths) &#123; NSString * filePath = [directorPath stringByAppendingPathComponent:path]; //åˆ¤æ–­æ˜¯å¦æ˜¯éšè—æ–‡ä»¶ if ([filePath containsString:@&quot;.DS&quot;]) &#123; continue; &#125; //åˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶å¤¹ BOOL isDirector; BOOL fileExist = [fileManager fileExistsAtPath:filePath isDirectory:&amp;isDirector]; if (!fileExist || isDirector) &#123; continue; &#125; NSDictionary * attrs = [fileManager attributesOfItemAtPath:filePath error:nil]; //4.æœ€åŽèŽ·å–size totoalSize += [attrs fileSize]; &#125; NXLog(@&quot;custom----size:%lu&quot;,(unsigned long)totoalSize); return totoalSize;&#125;// ç„¶åŽåœ¨è°ƒç”¨çš„åœ°æ–¹å¦‚ä¸‹å°±å¯ä»¥äº†ï¼š //1.å…ˆèŽ·å–cache ç›®å½•çš„è·¯å¾„ NSString * cachePath = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject]; // è¿™é‡Œå…ˆä»¥èŽ·å– default æ–‡ä»¶å¤¹å¤§å°åšå®žéªŒï¼Œçœ‹çœ‹æ˜¯å¦å’Œ SDImageCache èŽ·å–çš„ä¸€æ · NSString * directorPath = [cachePath stringByAppendingPathComponent:@&quot;default&quot;]; [self getFileSize:directorPath]; ä¸Šé¢çš„ç»“æžœå·²ç»åŸºæœ¬æ»¡è¶³åŠŸèƒ½äº†ã€‚ä½†æ˜¯å¦‚æžœæ˜¯é‡åˆ°ä¸€ä¸ªå¾ˆå¤§çš„æ–‡ä»¶å¤¹çš„è¯ï¼Œè¯¥æ“ä½œå¯èƒ½ä¼šé€ æˆå¡çº¿ç¨‹ï¼Œæ‰€ä»¥æœ€å¥½èƒ½æ”¾åˆ°å¼‚æ­¥çº¿ç¨‹é‡ŒåŽ»æ“ä½œã€‚ç”±äºŽæ˜¯å¼‚æ­¥æ“ä½œï¼Œè¿™é‡Œå°±ä¸é€‚åˆç”¨return æ¥è¿”å›žç»“æžœäº†ï¼Œå¯ä»¥ç”¨blockçš„å½¢å¼æ¥ä¼ ç»“æžœï¼š12345678910111213141516171819202122232425262728293031323334353637- (void)getFileSize:(NSString *)directorPath completion:(void(^)(NSUInteger totoalSize))completion&#123; //2.å£°æ˜Žä¸€ä¸ªæ–‡ä»¶ç®¡ç†å¯¹è±¡ NSFileManager * fileManager = [NSFileManager defaultManager]; //3.åœ¨ SDImageCache çš„getSize æ–¹æ³•é‡Œé¢æˆ‘ä»¬çœ‹åˆ°è°ƒç”¨äº†ä¸€ä¸ªæ–¹æ³• NSDictionary *attrs = [[NSFileManager defaultManager] attributesOfItemAtPath:filePath error:nil];æ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ¨¡ä»¿ä»–åŽ»åš dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; //è¿™ä¸ªå¯ä»¥èŽ·å–æ‰€æœ‰çš„å­æ–‡ä»¶åŠå­æ–‡ä»¶ä¸‹çš„æ–‡ä»¶ NSArray * subPaths = [fileManager subpathsAtPath:directorPath]; NSUInteger totoalSize = 0 ; for (NSString * path in subPaths) &#123; NSString * filePath = [directorPath stringByAppendingPathComponent:path]; //åˆ¤æ–­æ˜¯å¦æ˜¯éšè—æ–‡ä»¶ if ([filePath containsString:@&quot;.DS&quot;]) &#123; continue; &#125; //åˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶å¤¹ BOOL isDirector; BOOL fileExist = [fileManager fileExistsAtPath:filePath isDirectory:&amp;isDirector]; if (!fileExist || isDirector) &#123; continue; &#125; NSDictionary * attrs = [fileManager attributesOfItemAtPath:filePath error:nil]; //4.æœ€åŽèŽ·å–size totoalSize += [attrs fileSize]; &#125; //å®Œæˆä¹‹åŽå›žè°ƒ //è¿™é‡Œéœ€è¦åœ¨ä¸»çº¿ç¨‹åŽ»å›žè°ƒã€‚ä¸ç„¶æŽ¥æ”¶ä¸åˆ°å€¼ã€‚è¿™é‡Œå¯ä»¥ç”¨åŒæ­¥æ“ä½œï¼Œä¸ä¼šå¤ªè€—æ—¶ dispatch_sync(dispatch_get_main_queue(), ^&#123; if (completion) &#123; completion(totoalSize); &#125; &#125;); &#125;);&#125; åˆ°è¿™ä¸€æ­¥å·²ç»å¯ä»¥å®Œæˆäº†ã€‚ä¸è¿‡æˆ‘ä»¬è¿˜å¯ä»¥åœ¨å®Œå–„ä¸€ç‚¹ï¼Œå› ä¸ºæˆ‘ä»¬æ°¸è¿œæ— æ³•æƒ³è±¡ç”¨æˆ·ä¼šåšä»€ä¹ˆæ“ä½œã€‚åŒæ ·æˆ‘ä»¬å°†è¿™æ ·çš„æ–¹æ³•ä¸¢ç»™åŒäº‹åŽ»è°ƒç”¨ï¼Œä¹Ÿæ— æ³•åŽ»æƒ³è±¡ä»–ä»¬ä¼šä¼ ä¸€äº›ä»€ä¹ˆç¨€å¥‡å¤æ€ªçš„å‚æ•°ï¼Œæ¯”å¦‚ï¼Œä»–ç›´æŽ¥ç»™ä½ ä¼ ä¸ªæ–‡ä»¶çš„è·¯å¾„è€Œä¸æ˜¯æ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¾—åŠ ä¸€äº›å¼‚å¸¸å¤„ç†ï¼Œæ¯”å¦‚æŠ›å¼‚å¸¸ï¼Œå°±åƒè‹¹æžœç»å¸¸å¹²çš„é‚£æ ·ã€‚æœ€ç»ˆæˆ‘ä»¬ä¿®æ”¹åŽçš„æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748- (void)getFileSize:(NSString *)directorPath completion:(void(^)(NSUInteger totoalSize))completion&#123; //2.å£°æ˜Žä¸€ä¸ªæ–‡ä»¶ç®¡ç†å¯¹è±¡ NSFileManager * fileManager = [NSFileManager defaultManager]; // åœ¨è¿™é‡Œåšä¸€äº›å¼‚å¸¸çš„å¤„ç† //åˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶å¤¹ BOOL isDirector; BOOL fileExist = [fileManager fileExistsAtPath:directorPath isDirectory:&amp;isDirector]; if (!fileExist || !isDirector) &#123; NSException * exception = [NSException exceptionWithName:@&quot;PathError&quot; reason:@&quot;hey,man,è¿™é‡Œéœ€è¦çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œå¹¶ä¸”æ˜¯å­˜åœ¨çš„&quot; userInfo:nil]; [exception raise]; &#125; //3.åœ¨ SDImageCache çš„getSize æ–¹æ³•é‡Œé¢æˆ‘ä»¬çœ‹åˆ°è°ƒç”¨äº†ä¸€ä¸ªæ–¹æ³• NSDictionary *attrs = [[NSFileManager defaultManager] attributesOfItemAtPath:filePath error:nil];æ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ¨¡ä»¿ä»–åŽ»åš dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; //è¿™ä¸ªå¯ä»¥èŽ·å–æ‰€æœ‰çš„å­æ–‡ä»¶åŠå­æ–‡ä»¶ä¸‹çš„æ–‡ä»¶ NSArray * subPaths = [fileManager subpathsAtPath:directorPath]; NSUInteger totoalSize = 0 ; for (NSString * path in subPaths) &#123; NSString * filePath = [directorPath stringByAppendingPathComponent:path]; //åˆ¤æ–­æ˜¯å¦æ˜¯éšè—æ–‡ä»¶ if ([filePath containsString:@&quot;.DS&quot;]) &#123; continue; &#125; //åˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶å¤¹ BOOL isDirector; BOOL fileExist = [fileManager fileExistsAtPath:filePath isDirectory:&amp;isDirector]; if (!fileExist || isDirector) &#123; continue; &#125; NSDictionary * attrs = [fileManager attributesOfItemAtPath:filePath error:nil]; //4.æœ€åŽèŽ·å–size totoalSize += [attrs fileSize]; &#125; //å®Œæˆä¹‹åŽå›žè°ƒ //è¿™é‡Œéœ€è¦åœ¨ä¸»çº¿ç¨‹åŽ»å›žè°ƒã€‚ä¸ç„¶æŽ¥æ”¶ä¸åˆ°å€¼ã€‚è¿™é‡Œå¯ä»¥ç”¨åŒæ­¥æ“ä½œï¼Œä¸ä¼šå¤ªè€—æ—¶ dispatch_sync(dispatch_get_main_queue(), ^&#123; if (completion) &#123; completion(totoalSize); &#125; &#125;); &#125;);&#125; ç„¶åŽåœ¨è°ƒç”¨çš„æ—¶å€™ä¼ å…¥ä¸€ä¸ªé”™è¯¯çš„åœ°å€ï¼Œæ­£å¦‚æˆ‘ä»¬æ‰€æ–™ï¼ŒXcodeå´©äº†ï¼Œåœ¨æŽ§åˆ¶å°å‡ºæ¥ç»“æžœå¦‚ä¸‹ï¼šOKï¼Œå¯ä»¥æ”¶å·¥äº†ã€‚ #æ¸…é™¤ç¼“å­˜ æ¸…æ¥šç¼“å­˜ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œç›´æŽ¥è´´ä»£ç å§:12345678910- (void)removeFiles:(NSString *)directorPath&#123; NSFileManager * manager = [NSFileManager defaultManager]; //è¿™ä¸ªæ–¹æ³•æ˜¯èŽ·å–è¯¥æ–‡ä»¶ä¸‹çš„æ‰€æœ‰å­æ–‡ä»¶å¤¹ï¼Œä¸ä¼šèŽ·å–å­æ–‡ä»¶å¤¹é‡Œçš„æ–‡ä»¶(è¿™é‡Œæ²¡å¿…è¦äº†ï¼Œç›´æŽ¥åˆ é™¤æ–‡ä»¶å¤¹å°±å¯ä»¥) NSArray * subDirectors = [manager contentsOfDirectoryAtPath:directorPath error:nil]; for (NSString * path in subDirectors) &#123; NSString * filePath = [directorPath stringByAppendingPathComponent:path]; //åˆ é™¤æ–‡ä»¶å¤¹ [manager removeItemAtPath:filePath error:nil]; &#125; &#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ‚è®°]]></title>
    <url>%2F2017%2F08%2F26%2F%E6%9D%82%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[ä¸–ç•Œé‚£ä¹ˆå¤§ï¼Œæˆ‘æƒ³åŽ»çœ‹çœ‹ hexo å¸¸ç”¨å‘½ä»¤ï¼š 123456hexo new postName #æ–°å»ºæ–‡ç«  åœ¨source/_posts ä¸‹ç”Ÿæˆhexo new page pageName #æ–°å»ºé¡µé¢ åœ¨source/pageName ä¸‹ç”Ÿæˆhexo deploy #å°†.deployç›®å½•éƒ¨ç½²åˆ°GitHub ç®€å†™æŒ‡ä»¤ï¼šhexo dhexo generate #ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½• ç®€å†™æŒ‡ä»¤ï¼šhexo ghexo server #å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œ&apos;ctrl + c&apos;å…³é—­serverï¼‰ç®€å†™æŒ‡ä»¤hexo shexo clean #æ¸…é™¤æ‰€æœ‰é™æ€é¡µé¢å’Œç¼“å­˜æ•°æ® next æ–‡æ¡£ï¼šhttp://theme-next.iissnan.com/getting-started.html]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F07%2F12%2Ftest%2F</url>
    <content type="text"><![CDATA[note: Atom MarkDownæ–‡ä»¶ç¼–è¾‘å¿«æ·é”®ï¼šcontorl + shift + M è¿›å…¥é¢„è§ˆæ¨¡å¼ çˆ¶ç›®å½• ####### æˆ‘æ˜¯å­ç›®å½• æˆ‘æ˜¯å­™å­ç›®å½• åˆ é™¤æœ¬åœ°ç´¢å¼•åº“æ–‡ä»¶1pod repo remove xxxlib æœ‰æ—¶å€™æƒ³è¦æ”¹å˜æœ¬åœ°çš„ç´¢å¼•åº“åç§°ï¼Œå¯ä»¥ç”¨è¿™ä¸ªåˆ é™¤æŽ‰ä¹‹å‰çš„ï¼Œç„¶åŽé€šè¿‡ pod repo add newName gitåœ°å€æ¥è®¾ç½®æ–°çš„åç§°ã€‚ äº‹ä»¶å“åº”é“¾ å¯»æ‰¾æœ€åˆé€‚çš„view ####### æˆ‘æ˜¯å­ç›®å½• æˆ‘æ˜¯å­™å­ç›®å½• å½“ä¸€ä¸ªäº‹ä»¶ä¼ é€’ç»™view çš„æ—¶å€™ä¼šè°ƒç”¨ 1- (UIView *)hitTest:(CGPOint)point withEvent:(UIEvent *)event; åˆ¤æ–­å½“å‰ç‚¹åœ¨ä¸åœ¨è°ƒç”¨çš„view çš„èº«ä¸Šã€‚ ä»–æ˜¯åœ¨hitTestæ–¹æ³•ä¸­è°ƒç”¨çš„ã€‚ 1- (BOOL)pointInsid:(CGPOint)point withEvent:(UIEvent *)event; 1.å…ˆåŽ»åˆ¤æ–­å½“å‰çš„View æ˜¯ä¸æ˜¯æŽ§åˆ¶å™¨çš„View,å¦‚æžœå½“å‰çš„Viewæ˜¯æŽ§åˆ¶å™¨çš„Viewï¼Œé‚£ä¹ˆï¼Œå®ƒçš„ä¸Šä¸€ä¸ªå“åº”é“¾å°±æ˜¯å®ƒæ‰€åœ¨çš„æŽ§åˆ¶å™¨ 2.å¦‚æžœå½“å‰View ä¸æ˜¯æŽ§åˆ¶å™¨çš„View ,é‚£ä¹ˆçˆ¶æŽ§ä»¶å°±æ˜¯ä¸Šä¸€ä¸ªå“åº”é“¾ã€‚ #pragma mark - Cè¯­è¨€æ•°ç»„åŠ¨æ€å†…å­˜åˆ†é…æ•°ç»„çš„ç¼ºç‚¹ï¼š æ•°ç»„é•¿åº¦å¿…é¡»äº‹å…ˆåˆ¶å®šï¼Œä¸”åªèƒ½æ˜¯å¸¸æ•´æ•°ï¼Œä¸èƒ½æ˜¯å˜é‡ã€‚ ðŸŒ°12int a[5] = &#123;1,2,3,4,5&#125;; // æ­£ç¡®int length = 5; a[length]; // error ä¼ ç»Ÿå½¢å¼å®šä¹‰çš„æ•°ç»„ï¼Œç¨‹åºå‘˜æ— æ³•æ‰‹åŠ¨é‡Šæ”¾è¯¥æ•°ç»„çš„å†…å­˜ã€‚åœ¨ä¸€ä¸ªå‡½æ•°è¿è¡ŒæœŸé—´ï¼Œè¯¥å‡½æ•°ä¸ºè¯¥æ•°ç»„åˆ†é…çš„ç©ºé—´ä¼šä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°è¯¥å‡½æ•°è¿è¡Œå®Œæ¯•ï¼Œæ•°ç»„çš„ç©ºé—´æ‰ä¼šè¢«é‡Šæ”¾ã€‚ æ•°ç»„çš„é•¿åº¦ä¸èƒ½åœ¨å‡½æ•°è¿è¡Œçš„è¿‡ç¨‹ä¸­åŠ¨æ€çš„æ‰©å……å’Œç¼©å°ã€‚]]></content>
  </entry>
</search>
